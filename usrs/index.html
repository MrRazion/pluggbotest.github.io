<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anime Gallery | Telegram WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg-color: #ffffff;
            --tg-theme-text-color: #000000;
            --tg-theme-hint-color: #777777;
            --tg-theme-link-color: #2481cc;
            --tg-theme-button-color: #2481cc;
            --tg-theme-button-text-color: #ffffff;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--tg-theme-bg-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.3s;
        }
        
        .loading-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        .loading-text {
            color: var(--tg-theme-text-color);
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .progress-bar {
            width: 80%;
            height: 4px;
            background-color: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            width: 0%;
            background-color: var(--tg-theme-button-color);
            transition: width 0.4s ease;
        }
        
        .refresh-text {
            margin-top: 15px;
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }
        
        .main-content {
            display: none;
            padding: 16px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .logo {
            font-weight: bold;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo-icon {
            width: 24px;
            height: 24px;
            background-color: var(--tg-theme-button-color);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .header-icons {
            display: flex;
            gap: 15px;
        }
        
        .header-icon {
            width: 24px;
            height: 24px;
            color: var(--tg-theme-text-color);
            opacity: 0.7;
            cursor: pointer;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .grid-item {
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 3/4;
            position: relative;
            background-color: #f5f5f5;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .grid-item:hover {
            transform: scale(1.02);
        }
        
        .grid-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .video-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background-color: rgba(0,0,0,0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .video-overlay::after {
            content: '';
            border-style: solid;
            border-width: 8px 0 8px 14px;
            border-color: transparent transparent transparent white;
            display: block;
            width: 0;
            height: 0;
            transform: translateX(2px);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: none;
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            max-width: 90%;
            max-height: 85%;
            position: relative;
        }
        
        .modal-image {
            max-width: 100%;
            max-height: 75vh;
            border-radius: 12px;
            display: block;
        }
        
        .modal-video {
            max-width: 100%;
            max-height: 75vh;
            border-radius: 12px;
        }
        
        .modal-close {
            position: absolute;
            top: -30px;
            right: 0;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .action-button {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .action-button:hover {
            background-color: #1d6bb5;
        }
        
        .comments-section {
            margin-top: 25px;
        }
        
        .comments-header {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .comment {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .comment-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-header {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }
        
        .comment-username {
            font-weight: bold;
            color: var(--tg-theme-text-color);
        }
        
        .comment-meta {
            color: var(--tg-theme-hint-color);
            font-size: 12px;
        }
        
        .comment-text {
            line-height: 1.4;
            margin-bottom: 10px;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }
        
        .comment-action {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .comment-action:hover {
            color: var(--tg-theme-button-color);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .page-button {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-color: rgba(0,0,0,0.05);
            color: var(--tg-theme-text-color);
        }
        
        .page-button.active {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
        }
        
        .page-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .info-section {
            background-color: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .info-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .info-content {
            padding-left: 20px;
            font-family: monospace;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }
        
        .tags-section {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        
        .tag {
            background-color: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 5px 10px;
            font-family: monospace;
            font-size: 13px;
        }
        
        .disclaimer {
            background-color: #ff4444;
            color: white;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            font-size: 13px;
            margin: 20px 0;
        }
        
        .user-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--tg-theme-bg-color);
            border-radius: 16px;
            width: 80%;
            max-width: 300px;
            display: none;
            z-index: 200;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: fadeIn 0.2s;
        }
        
        .user-menu-header {
            padding: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .user-menu-content {
            padding: 15px;
        }
        
        .user-menu-item {
            padding: 12px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .user-menu-item:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        .login-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border-radius: 12px;
            background-color: rgba(0,0,0,0.05);
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .login-option:hover {
            background-color: rgba(0,0,0,0.1);
        }
        
        .telegram-icon {
            width: 24px;
            height: 24px;
            background-color: #2481cc;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--tg-theme-bg-color);
            display: none;
            z-index: 150;
            overflow-y: auto;
            padding: 20px;
        }
        
        .settings-header {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .back-button {
            margin-right: 10px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background-color: rgba(0,0,0,0.05);
        }
        
        .search-bar {
            background-color: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-bar input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 16px;
            outline: none;
            color: var(--tg-theme-text-color);
        }
        
        .search-suggestions {
            background-color: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .search-suggestion {
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .search-suggestion:hover {
            background-color: rgba(0,0,0,0.1);
        }
        
        .settings-section {
            margin-bottom: 25px;
        }
        
        .settings-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
        }
        
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        
        .slider:hover {
            opacity: 1;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--tg-theme-button-color);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--tg-theme-button-color);
            cursor: pointer;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider-round {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider-round:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider-round {
            background-color: var(--tg-theme-button-color);
        }
        
        input:checked + .slider-round:before {
            transform: translateX(20px);
        }
        
        .toggle-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .nav-tab {
            padding: 8px 15px;
            border-radius: 12px;
            background-color: rgba(0,0,0,0.05);
            white-space: nowrap;
            cursor: pointer;
        }
        
        .nav-tab.active {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -48%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        .hidden {
            display: none;
        }
        
        .guest-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
        
        .guest-content {
            background-color: var(--tg-theme-bg-color);
            border-radius: 16px;
            width: 80%;
            max-width: 320px;
            padding: 20px;
            text-align: center;
        }
        
        .guest-gif {
            width: 100%;
            height: 150px;
            background-color: #f0f0f0;
            border-radius: 12px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--tg-theme-hint-color);
            font-size: 12px;
        }
        
        .guest-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .guest-text {
            color: var(--tg-theme-hint-color);
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .login-button {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 20px;
            padding: 12px 20px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.2s;
        }
        
        .login-button:hover {
            background-color: #1d6bb5;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 3px;
        }
        
        .profile-meta {
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }
        
        .profile-logout {
            background-color: #ff4444;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .albums-section {
            margin-top: 20px;
        }
        
        .album-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .album-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .album-item {
            aspect-ratio: 1/1;
            border-radius: 12px;
            overflow: hidden;
            background-color: #f5f5f5;
        }
        
        .album-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .album-options {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            border-radius: 6px;
            background-color: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
        }
        
        .album-menu {
            position: absolute;
            top: 30px;
            right: 5px;
            background-color: var(--tg-theme-bg-color);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
            z-index: 10;
        }
        
        .album-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .album-menu-item:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        .comment-input {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px 16px;
            background-color: var(--tg-theme-bg-color);
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .comment-input-container {
            display: flex;
            gap: 10px;
            background-color: rgba(0,0,0,0.05);
            border-radius: 20px;
            padding: 8px 15px;
        }
        
        .comment-input-container input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 16px;
            outline: none;
            color: var(--tg-theme-text-color);
        }
        
        .send-button {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            background-color: var(--tg-theme-button-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
        }
        
        .reply-to {
            background-color: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 8px 12px;
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
        }
        
        .reply-username {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .reply-text {
            font-size: 14px;
            line-height: 1.3;
        }
        
        .reply-indicator {
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--tg-theme-button-color);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <div class="logo-icon">A</div>
        </div>
        <div class="loading-text">Loading Anime Gallery</div>
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        <div class="refresh-text">Refreshing...</div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">A</div>
                <span>Anime Gallery</span>
            </div>
            <div class="header-icons">
                <div class="header-icon" id="searchIcon">üîç</div>
                <div class="header-icon" id="settingsIcon">‚öôÔ∏è</div>
                <div class="header-icon" id="profileIcon">üë§</div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="posts">Posts</div>
            <div class="nav-tab" data-tab="comments">Comments</div>
            <div class="nav-tab" data-tab="artists">Artists</div>
            <div class="nav-tab" data-tab="tags">Tags</div>
            <div class="nav-tab" data-tab="video">Video</div>
        </div>

        <!-- Search Bar -->
        <div class="search-bar hidden" id="searchBar">
            <span>üîç</span>
            <input type="text" placeholder="Search characters, artists..." id="searchInput">
        </div>

        <!-- Search Suggestions -->
        <div class="search-suggestions" id="searchSuggestions">
            <div class="search-suggestion">Sakura Haruno (1,243)</div>
            <div class="search-suggestion">Naruto Uzumaki (2,567)</div>
            <div class="search-suggestion">Goku (3,892)</div>
            <div class="search-suggestion">Luffy (2,105)</div>
            <div class="search-suggestion">Levi Ackerman (1,789)</div>
        </div>

        <!-- Content Area -->
        <div id="contentArea">
            <!-- Posts Grid -->
            <div class="grid" id="postsGrid">
                <!-- Grid items will be populated by JavaScript -->
            </div>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <div class="page-button" id="prevPage"><</div>
            <div class="page-button active">1</div>
            <div class="page-button">2</div>
            <div class="page-button">3</div>
            <div class="page-button">4</div>
            <div class="page-button" id="nextPage">></div>
        </div>

        <!-- Info Section -->
        <div class="info-section hidden" id="infoSection">
            <div class="info-title">Character</div>
            <div class="info-content" id="characterInfo">sakura_haruno</div>
            
            <div class="info-title" style="margin-top: 15px;">General</div>
            <div class="tags-section" id="generalTags">
                <div class="tag">pink_hair</div>
                <div class="tag">green_eyes</div>
                <div class="tag">forehead</div>
            </div>
            
            <div class="info-title" style="margin-top: 15px;">Meta</div>
            <div class="tags-section" id="metaTags">
                <div class="tag">high_quality</div>
                <div class="tag">detailed</div>
            </div>
            
            <div class="info-title" style="margin-top: 15px;">Statistics</div>
            <div class="info-content">
                ID: 123456<br>
                Posted: 19 Jul. 2023 | 14:30<br>
                User: anime_artist_01<br>
                Size: 1200x1800<br>
                Rating: Safe
            </div>
        </div>

        <!-- Comments Section -->
        <div class="comments-section hidden" id="commentsSection">
            <div class="comments-header">Comments</div>
            
            <div class="comment">
                <div class="comment-avatar">
                    <img src="https://i.pravatar.cc/150?img=1" alt="Avatar">
                </div>
                <div class="comment-content">
                    <div class="comment-header">
                        <span class="comment-username">AnimeFan2023</span>
                        <span class="comment-meta">@animefan | 2h ago</span>
                    </div>
                    <div class="comment-text">This artwork is amazing! The colors are so vibrant and the details are incredible.</div>
                    <div class="comment-actions">
                        <div class="comment-action">üëç 12</div>
                        <div class="comment-action">üëé 0</div>
                        <div class="comment-action">‚Ü©Ô∏è Reply</div>
                    </div>
                </div>
            </div>
            
            <div class="comment">
                <div class="comment-avatar">
                    <img src="https://i.pravatar.cc/150?img=2" alt="Avatar">
                </div>
                <div class="comment-content">
                    <div class="comment-header">
                        <span class="comment-username">MangaLover</span>
                        <span class="comment-meta">@mangalover | 1h ago</span>
                    </div>
                    <div class="comment-text">I love how they captured Sakura's personality in this drawing!</div>
                    <div class="comment-actions">
                        <div class="comment-action">üëç 8</div>
                        <div class="comment-action">üëé 0</div>
                        <div class="comment-action">‚Ü©Ô∏è Reply</div>
                    </div>
                    
                    <!-- Reply -->
                    <div class="comment" style="margin-top: 15px; border-left: 3px solid var(--tg-theme-button-color); padding-left: 10px;">
                        <div class="comment-header">
                            <span class="comment-username">NarutoFan99</span>
                            <span class="comment-meta">@narutofan | 30m ago</span>
                        </div>
                        <div class="comment-text">Absolutely! Her expression is perfect.</div>
                        <div class="comment-actions">
                            <div class="comment-action">üëç 5</div>
                            <div class="comment-action">üëé 0</div>
                            <div class="comment-action">‚Ü©Ô∏è Reply</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comment Input -->
        <div class="comment-input hidden" id="commentInput">
            <div class="comment-input-container">
                <input type="text" placeholder="Write a comment...">
                <div class="send-button">‚û§</div>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
            This Telegram bot is not an official service and was made with passion for anime.
        </div>
    </div>

    <!-- Modal for viewing images/videos -->
    <div class="modal" id="mediaModal">
        <div class="modal-content">
            <img class="modal-image" id="modalImage" src="" alt="Full size image">
            <video class="modal-video hidden" id="modalVideo" controls></video>
            <div class="modal-close" id="modalClose">&times;</div>
        </div>
        <div class="modal-actions">
            <button class="action-button" id="downloadButton">
                <span>‚Üì</span> Download
            </button>
            <button class="action-button" id="addToAlbumButton">
                <span>+</span> Add to Album
            </button>
        </div>
    </div>

    <!-- User Menu -->
    <div class="user-menu" id="userMenu">
        <div class="user-menu-header">
            <div class="guest-gif">
                Loading GIF...
            </div>
            <div class="guest-title">Welcome!</div>
            <div class="guest-text">
                Sign in with Telegram to comment, like posts, and save your favorite artwork.
            </div>
        </div>
        <div class="user-menu-content">
            <div class="login-option" id="telegramLogin">
                <div class="telegram-icon">T</div>
                <span>Sign in with Telegram</span>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal hidden" id="settingsModal">
        <div class="settings-header">
            <div class="back-button" id="settingsBack">‚Üê</div>
            <div>Settings</div>
        </div>
        
        <div class="settings-section">
            <div class="settings-title">Thumbnail Size</div>
            <div class="slider-container">
                <div class="slider-label">
                    <span>Small</span>
                    <span>Large</span>
                </div>
                <input type="range" min="1" max="3" value="2" class="slider" id="thumbnailSlider">
            </div>
        </div>
        
        <div class="settings-section">
            <div class="settings-title">Filter Options</div>
            <div class="toggle-option">
                <span>Show AI-generated content</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="aiFilterToggle">
                    <span class="slider-round"></span>
                </label>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="settings-modal hidden" id="profileModal">
        <div class="settings-header">
            <div class="back-button" id="profileBack">‚Üê</div>
            <div>Profile</div>
        </div>
        
        <div class="profile-header">
            <div class="profile-avatar">
                <img src="" alt="Profile Avatar" id="profileAvatar">
            </div>
            <div class="profile-info">
                <div class="profile-name" id="profileName">Loading...</div>
                <div class="profile-meta" id="profileMeta">@username | ID: 0000000</div>
            </div>
        </div>
        
        <div class="albums-section">
            <div class="album-title">
                My Albums
                <span>+</span>
            </div>
            <div class="album-grid" id="albumGrid">
                <div class="album-item">
                    <img src="https://picsum.photos/200/300?random=1" alt="Album image">
                </div>
                <div class="album-item">
                    <img src="https://picsum.photos/200/300?random=2" alt="Album image">
                </div>
                <div class="album-item">
                    <img src="https://picsum.photos/200/300?random=3" alt="Album image">
                </div>
            </div>
        </div>
        
        <button class="profile-logout" id="logoutButton">Log Out</button>
    </div>

    <!-- Guest Overlay (for unauthenticated users) -->
    <div class="guest-overlay hidden" id="guestOverlay">
        <div class="guest-content">
            <div class="guest-gif">
                Welcome GIF
            </div>
            <div class="guest-title">Welcome!</div>
            <div class="guest-text">
                Sign in with Telegram to comment, like posts, and save your favorite artwork.
            </div>
            <button class="login-button" id="guestLoginButton">
                <span>üì±</span> Sign in with Telegram
            </button>
        </div>
    </div>

    <script>
        // Initialize Telegram WebApp
        const tg = window.Telegram?.WebApp;
        
        if (tg) {
            tg.expand();
            tg.ready();
            
            // Set theme params
            if (tg.themeParams) {
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#ffffff');
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#000000');
                document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color || '#777777');
                document.documentElement.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color || '#2481cc');
                document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#2481cc');
                document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || '#ffffff');
            }
        }

        // Mock user data for demonstration
        const mockUserData = {
            id: 123456789,
            first_name: "Anime",
            last_name: "Fan",
            username: "anime_fan_01",
            language_code: "en",
            is_premium: false,
            photo_url: "https://i.pravatar.cc/150?img=3"
        };

        // Mock posts data
        const mockPosts = [
            { id: 1, type: 'image', url: 'https://picsum.photos/400/600?random=1', tags: ['sakura_haruno', 'pink_hair', 'green_eyes'] },
            { id: 2, type: 'image', url: 'https://picsum.photos/400/600?random=2', tags: ['naruto', 'blonde_hair', 'headband'] },
            { id: 3, type: 'image', url: 'https://picsum.photos/400/600?random=3', tags: ['goku', 'black_hair', 'orange_gi'] },
            { id: 4, type: 'image', url: 'https://picsum.photos/400/600?random=4', tags: ['luffy', 'straw_hat', 'rubber'] },
            { id: 5, type: 'image', url: 'https://picsum.photos/400/600?random=5', tags: ['levi', 'black_hair', 'scars'] },
            { id: 6, type: 'image', url: 'https://picsum.photos/400/600?random=6', tags: ['hinata', 'white_eyes', 'shy'] },
            { id: 7, type: 'video', url: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4', tags: ['sakura', 'training', 'forehead'] },
            { id: 8, type: 'image', url: 'https://picsum.photos/400/600?random=8', tags: ['ichigo', 'orange_hair', 'sword'] },
            { id: 9, type: 'image', url: 'https://picsum.photos/400/600?random=9', tags: ['sasuke', 'sharingan', 'rinnegan'] }
        ];

        // App state
        const appState = {
            currentUser: null,
            currentMedia: null,
            currentPage: 1,
            currentTab: 'posts',
            thumbnailSize: 2, // 1=single column, 2=double column, 3=triple column
            showAiContent: false,
            isAuthenticated: false
        };

        // DOM Elements
        const elements = {
            loadingScreen: document.getElementById('loadingScreen'),
            progressBar: document.getElementById('progressBar'),
            mainContent: document.getElementById('mainContent'),
            postsGrid: document.getElementById('postsGrid'),
            pagination: document.getElementById('pagination'),
            prevPage: document.getElementById('prevPage'),
            nextPage: document.getElementById('nextPage'),
            mediaModal: document.getElementById('mediaModal'),
            modalImage: document.getElementById('modalImage'),
            modalVideo: document.getElementById('modalVideo'),
            modalClose: document.getElementById('modalClose'),
            downloadButton: document.getElementById('downloadButton'),
            addToAlbumButton: document.getElementById('addToAlbumButton'),
            infoSection: document.getElementById('infoSection'),
            characterInfo: document.getElementById('characterInfo'),
            generalTags: document.getElementById('generalTags'),
            metaTags: document.getElementById('metaTags'),
            commentsSection: document.getElementById('commentsSection'),
            commentInput: document.getElementById('commentInput'),
            userMenu: document.getElementById('userMenu'),
            telegramLogin: document.getElementById('telegramLogin'),
            settingsModal: document.getElementById('settingsModal'),
            settingsBack: document.getElementById('settingsBack'),
            thumbnailSlider: document.getElementById('thumbnailSlider'),
            aiFilterToggle: document.getElementById('aiFilterToggle'),
            profileModal: document.getElementById('profileModal'),
            profileBack: document.getElementById('profileBack'),
            profileAvatar: document.getElementById('profileAvatar'),
            profileName: document.getElementById('profileName'),
            profileMeta: document.getElementById('profileMeta'),
            logoutButton: document.getElementById('logoutButton'),
            searchIcon: document.getElementById('searchIcon'),
            settingsIcon: document.getElementById('settingsIcon'),
            profileIcon: document.getElementById('profileIcon'),
            searchInput: document.getElementById('searchInput'),
            searchBar: document.getElementById('searchBar'),
            searchSuggestions: document.getElementById('searchSuggestions'),
            navTabs: document.querySelectorAll('.nav-tab'),
            guestOverlay: document.getElementById('guestOverlay'),
            guestLoginButton: document.getElementById('guestLoginButton')
        };

        // Initialize the app
        function initApp() {
            // Simulate loading process
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(showMainContent, 300);
                }
                elements.progressBar.style.width = `${progress}%`;
            }, 150);
            
            // Check authentication status
            checkAuthStatus();
        }

        // Show main content after loading
        function showMainContent() {
            elements.loadingScreen.style.opacity = '0';
            setTimeout(() => {
                elements.loadingScreen.style.display = 'none';
                elements.mainContent.style.display = 'block';
                loadPosts();
                setupEventListeners();
            }, 300);
        }

        // Check authentication status
        function checkAuthStatus() {
            // In a real app, this would check with your backend
            const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
            appState.isAuthenticated = isAuthenticated;
            
            if (isAuthenticated) {
                appState.currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null') || mockUserData;
                setupAuthenticatedUI();
            } else {
                setupGuestUI();
            }
        }

        // Setup UI for authenticated users
        function setupAuthenticatedUI() {
            elements.guestOverlay.classList.add('hidden');
            elements.commentInput.classList.remove('hidden');
            elements.infoSection.classList.remove('hidden');
        }

        // Setup UI for guest users
        function setupGuestUI() {
            elements.guestOverlay.classList.remove('hidden');
            elements.commentInput.classList.add('hidden');
            elements.infoSection.classList.add('hidden');
        }

        // Load posts into the grid
        function loadPosts() {
            elements.postsGrid.innerHTML = '';
            
            // Determine number of columns based on thumbnail size
            const columns = appState.thumbnailSize;
            elements.postsGrid.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            
            // Get posts to display (simplified for demo)
            const postsToDisplay = mockPosts.slice(0, 9);
            
            postsToDisplay.forEach(post => {
                const gridItem = document.createElement('div');
                gridItem.className = 'grid-item';
                gridItem.dataset.id = post.id;
                
                if (post.type === 'image') {
                    const img = document.createElement('img');
                    img.src = post.url;
                    img.alt = 'Anime artwork';
                    gridItem.appendChild(img);
                } else if (post.type === 'video') {
                    const img = document.createElement('img');
                    img.src = 'https://picsum.photos/400/600?random=7';
                    img.alt = 'Video thumbnail';
                    gridItem.appendChild(img);
                    
                    const videoOverlay = document.createElement('div');
                    videoOverlay.className = 'video-overlay';
                    gridItem.appendChild(videoOverlay);
                }
                
                gridItem.addEventListener('click', () => openMediaModal(post));
                elements.postsGrid.appendChild(gridItem);
            });
        }

        // Open media modal
        function openMediaModal(media) {
            appState.currentMedia = media;
            
            if (media.type === 'image') {
                elements.modalImage.src = media.url;
                elements.modalImage.classList.remove('hidden');
                elements.modalVideo.classList.add('hidden');
                elements.modalVideo.src = '';
            } else if (media.type === 'video') {
                elements.modalVideo.src = media.url;
                elements.modalVideo.classList.remove('hidden');
                elements.modalImage.classList.add('hidden');
            }
            
            // Update tags
            updateMediaTags(media);
            
            elements.mediaModal.style.display = 'flex';
        }

        // Update media tags in the modal
        function updateMediaTags(media) {
            // For demo purposes, we'll use the first tag as character
            if (media.tags && media.tags.length > 0) {
                elements.characterInfo.textContent = media.tags[0];
                
                // Clear existing tags
                elements.generalTags.innerHTML = '';
                elements.metaTags.innerHTML = '';
                
                // Add general tags (all except first)
                for (let i = 1; i < media.tags.length; i++) {
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.textContent = media.tags[i];
                    elements.generalTags.appendChild(tag);
                }
                
                // Add meta tags
                const metaTags = ['high_quality', 'detailed'];
                metaTags.forEach(tag => {
                    const tagEl = document.createElement('div');
                    tagEl.className = 'tag';
                    tagEl.textContent = tag;
                    elements.metaTags.appendChild(tagEl);
                });
            }
            
            elements.infoSection.classList.remove('hidden');
        }

        // Close media modal
        function closeMediaModal() {
            elements.mediaModal.style.display = 'none';
            elements.modalVideo.pause();
            elements.modalVideo.src = '';
        }

        // Download media
        function downloadMedia() {
            if (!appState.currentMedia) return;
            
            // In a real app, this would trigger a proper download
            if (appState.currentMedia.type === 'image') {
                const a = document.createElement('a');
                a.href = appState.currentMedia.url;
                a.download = `anime_art_${appState.currentMedia.id}.jpg`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } else if (appState.currentMedia.type === 'video') {
                const a = document.createElement('a');
                a.href = appState.currentMedia.url;
                a.download = `anime_video_${appState.currentMedia.id}.mp4`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        }

        // Add to album
        function addToAlbum() {
            if (!appState.isAuthenticated) {
                showGuestOverlay();
                return;
            }
            
            // In a real app, this would save to the user's album
            alert('Added to your "Favorites" album!');
        }

        // Show guest overlay for unauthenticated actions
        function showGuestOverlay() {
            elements.guestOverlay.classList.remove('hidden');
        }

        // Hide guest overlay
        function hideGuestOverlay() {
            elements.guestOverlay.classList.add('hidden');
        }

        // Authenticate user
        function authenticateUser() {
            // In a real app, this would connect to Telegram auth
            appState.isAuthenticated = true;
            appState.currentUser = mockUserData;
            
            // Save to localStorage
            localStorage.setItem('isAuthenticated', 'true');
            localStorage.setItem('currentUser', JSON.stringify(mockUserData));
            
            // Update UI
            setupAuthenticatedUI();
            
            // Hide guest overlay
            hideGuestOverlay();
            
            // Show success message
            alert('Successfully logged in with Telegram!');
        }

        // Logout user
        function logoutUser() {
            appState.isAuthenticated = false;
            appState.currentUser = null;
            
            // Clear localStorage
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('currentUser');
            
            // Update UI
            setupGuestUI();
            
            // Close profile modal
            elements.profileModal.classList.add('hidden');
            
            alert('You have been logged out.');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Modal events
            elements.modalClose.addEventListener('click', closeMediaModal);
            elements.downloadButton.addEventListener('click', downloadMedia);
            elements.addToAlbumButton.addEventListener('click', addToAlbum);
            
            // Settings events
            elements.settingsIcon.addEventListener('click', () => {
                elements.settingsModal.classList.remove('hidden');
            });
            
            elements.settingsBack.addEventListener('click', () => {
                elements.settingsModal.classList.add('hidden');
            });
            
            // Profile events
            elements.profileIcon.addEventListener('click', () => {
                if (appState.isAuthenticated) {
                    // Show profile
                    if (appState.currentUser) {
                        elements.profileAvatar.src = appState.currentUser.photo_url;
                        elements.profileName.textContent = `${appState.currentUser.first_name} ${appState.currentUser.last_name}`;
                        elements.profileMeta.textContent = `@${appState.currentUser.username} | ID: ${appState.currentUser.id}`;
                    }
                    elements.profileModal.classList.remove('hidden');
                } else {
                    // Show login menu
                    elements.userMenu.style.display = 'flex';
                }
            });
            
            elements.profileBack.addEventListener('click', () => {
                elements.profileModal.classList.add('hidden');
            });
            
            elements.logoutButton.addEventListener('click', logoutUser);
            
            // User menu events
            elements.telegramLogin.addEventListener('click', authenticateUser);
            
            // Search events
            elements.searchIcon.addEventListener('click', () => {
                elements.searchBar.classList.toggle('hidden');
                if (!elements.searchBar.classList.contains('hidden')) {
                    elements.searchInput.focus();
                }
            });
            
            elements.searchInput.addEventListener('input', (e) => {
                if (e.target.value.length > 0) {
                    elements.searchSuggestions.style.display = 'block';
                } else {
                    elements.searchSuggestions.style.display = 'none';
                }
            });
            
            // Navigation tabs
            elements.navTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active tab
                    elements.navTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update current tab
                    appState.currentTab = tab.dataset.tab;
                    
                    // Load content based on tab
                    if (appState.currentTab === 'posts') {
                        elements.postsGrid.style.display = 'grid';
                        elements.commentsSection.classList.add('hidden');
                        elements.infoSection.classList.remove('hidden');
                    } else if (appState.currentTab === 'comments') {
                        elements.postsGrid.style.display = 'none';
                        elements.commentsSection.classList.remove('hidden');
                        elements.infoSection.classList.add('hidden');
                    } else {
                        // Other tabs would have their own content
                        elements.postsGrid.style.display = 'grid';
                        elements.commentsSection.classList.add('hidden');
                        elements.infoSection.classList.remove('hidden');
                    }
                });
            });
            
            // Thumbnail size slider
            elements.thumbnailSlider.addEventListener('input', (e) => {
                appState.thumbnailSize = parseInt(e.target.value);
                loadPosts();
            });
            
            // AI filter toggle
            elements.aiFilterToggle.addEventListener('change', (e) => {
                appState.showAiContent = e.target.checked;
                loadPosts();
            });
            
            // Guest overlay
            elements.guestLoginButton.addEventListener('click', authenticateUser);
            
            // Pagination
            elements.prevPage.addEventListener('click', () => {
                if (appState.currentPage > 1) {
                    appState.currentPage--;
                    loadPosts();
                    updatePagination();
                }
            });
            
            elements.nextPage.addEventListener('click', () => {
                appState.currentPage++;
                loadPosts();
                updatePagination();
            });
            
            // Comment input
            document.querySelector('.send-button').addEventListener('click', () => {
                const input = document.querySelector('.comment-input-container input');
                if (input.value.trim() !== '') {
                    // In a real app, this would send the comment to your backend
                    alert('Comment posted!');
                    input.value = '';
                }
            });
            
            // Close user menu when clicking outside
            document.addEventListener('click', (e) => {
                if (elements.userMenu.style.display === 'flex' && 
                    !elements.userMenu.contains(e.target) && 
                    e.target !== elements.profileIcon) {
                    elements.userMenu.style.display = 'none';
                }
            });
        }

        // Update pagination display
        function updatePagination() {
            // This would be more dynamic in a real app
            const pageButtons = document.querySelectorAll('.page-button:not(#prevPage):not(#nextPage)');
            pageButtons.forEach((button, index) => {
                button.classList.toggle('active', index + 1 === appState.currentPage);
            });
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });
    </script>
</body>
</html>
