<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Player in Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
        #player { width: 100%; height: 400px; border: none; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }
        button { padding: 10px 20px; background: #0088cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #006ba0; }
        #search { display: none; } /* Optional search UI */
    </style>
</head>
<body>
    <h2>YouTube Player</h2>
    <input type="url" id="urlInput" placeholder="Paste YouTube URL here (e.g., https://www.youtube.com/watch?v=VIDEO_ID)">
    <button onclick="loadVideo()">Load Video</button>
    <button onclick="toggleFullscreen()">Fullscreen</button>
    
    <div id="search">
        <input type="text" id="searchInput" placeholder="Or search for videos...">
        <button onclick="searchVideos()">Search</button>
        <ul id="searchResults"></ul>
    </div>
    
    <iframe id="player" src=""></iframe>

    <script>
        // Initialize Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand(); // Start in expanded mode

        let isFullscreen = false;

        function loadVideo() {
            const url = document.getElementById('urlInput').value;
            if (!url) return alert('Please enter a YouTube URL!');
            
            // Extract video ID from URL (simple regex for common formats)
            const videoId = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/)?.[1];
            if (!videoId) return alert('Invalid YouTube URL!');
            
            document.getElementById('player').src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
        }

        function toggleFullscreen() {
            isFullscreen = !isFullscreen;
            if (isFullscreen) {
                tg.expand(); // Fullscreen in Telegram
                document.getElementById('player').style.height = '100vh';
            } else {
                tg.close(); // Or just shrink
                document.getElementById('player').style.height = '400px';
            }
        }

        // Optional: Simple search (uses YouTube search embed)
        function searchVideos() {
            const query = document.getElementById('searchInput').value;
            if (!query) return;
            
            // This embeds a YouTube search pageâ€”click a result to play
            document.getElementById('player').src = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
            document.getElementById('search').style.display = 'block';
        }

        // Listen for theme changes from Telegram
        tg.onEvent('themeChanged', () => {
            document.body.className = tg.colorScheme;
        });
        document.body.className = tg.colorScheme;
    </script>
</body>
</html>
