<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PLUGG BOT</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --tg-safe-area-inset-top: 0px;
            --tg-safe-area-inset-bottom: 0px;
            --tg-safe-area-inset-left: 0px;
            --tg-safe-area-inset-right: 0px;
            --primary-bg: #0a0a0a;
            --secondary-bg: #121212;
            --card-bg: #1a1a1a;
            --text-color: #ffffff;
            --text-secondary: #b0b0b0;
            --accent-gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --accent-color: #4a86ff;
            --success-color: #34c759;
            --error-color: #ff3b30;
            --border-radius-lg: 20px;
            --border-radius-md: 16px;
            --border-radius-sm: 12px;
            --shadow-soft: 0 4px 24px rgba(0, 0, 0, 0.3);
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.25);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        body {
            background: var(--primary-bg);
            color: var(--text-color);
            line-height: 1.6;
            padding-top: var(--tg-safe-area-inset-top);
            padding-bottom: calc(80px + var(--tg-safe-area-inset-bottom));
            padding-left: var(--tg-safe-area-inset-left);
            padding-right: var(--tg-safe-area-inset-right);
            min-height: 100vh;
            overflow-x: hidden;
            transition: var(--transition);
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        /* Header with gradient and profile button */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--secondary-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-soft);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            z-index: 1;
        }
        .header h1 {
            font-size: 22px;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 2;
        }
        .header p {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 5px;
        }
        .profile-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 3;
        }
        .profile-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        .profile-icon {
            width: 24px;
            height: 24px;
            color: var(--accent-color);
        }
        /* Search bar with modern design */
        .search-bar {
            margin-bottom: 20px;
            position: relative;
            border-radius: var(--border-radius-md);
            overflow: hidden;
        }
        .search-bar input {
            width: 100%;
            padding: 14px 15px 14px 45px;
            background: var(--secondary-bg);
            border: none;
            border-radius: var(--border-radius-md);
            color: var(--text-color);
            font-size: 14px;
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        .search-bar input:focus {
            outline: none;
            box-shadow: 0 4px 12px rgba(74, 134, 255, 0.25);
        }
        .search-bar svg {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            fill: var(--text-secondary);
            transition: var(--transition);
        }
        /* Tabs with smooth animation */
        .tabs {
            display: flex;
            overflow-x: auto;
            margin-bottom: 20px;
            padding-bottom: 5px;
            scrollbar-width: none;
            gap: 8px;
        }
        .tabs::-webkit-scrollbar {
            display: none;
        }
        .tab {
            padding: 10px 20px;
            background: var(--secondary-bg);
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 15px;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }
        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-gradient);
            transition: var(--transition);
        }
        .tab:hover::after {
            width: 100%;
        }
        .tab.active {
            background: var(--card-bg);
            color: var(--accent-color);
        }
        .tab.active::after {
            width: 100%;
        }
        /* Games grid with improved card design */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 30px;
        }
        .game-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow-card);
            position: relative;
            cursor: pointer;
            transform: translateY(0);
        }
        .game-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 28px rgba(0, 0, 0, 0.3);
        }
        .game-image {
            width: 100%;
            height: 140px;
            overflow: hidden;
            position: relative;
            background: linear-gradient(45deg, #1a1a1a, #252525);
        }
        .game-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
            opacity: 0.9;
        }
        .game-card:hover .game-image img {
            transform: scale(1.05);
            opacity: 1;
        }
        .game-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            height: 50%;
        }
        .game-info {
            padding: 14px;
        }
        .game-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-color);
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .game-description {
            font-size: 13px;
            color: var(--text-secondary);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 38px;
        }
        .library-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: var(--transition);
            z-index: 2;
        }
        .library-btn:hover {
            background: rgba(74, 134, 255, 0.2);
            color: var(--accent-color);
        }
        .library-btn.active {
            color: var(--success-color);
            background: rgba(52, 199, 89, 0.2);
        }
        /* Game details page */
        .game-details {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-bg);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
            padding-top: var(--tg-safe-area-inset-top);
            padding-bottom: var(--tg-safe-area-inset-bottom);
            padding-left: var(--tg-safe-area-inset-left);
            padding-right: var(--tg-safe-area-inset-right);
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .game-details.active {
            display: block;
        }
        .game-details-content {
            background: var(--secondary-bg);
            border-radius: var(--border-radius-lg);
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--shadow-card);
        }
        .game-details-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .game-details-icon {
            width: 70px;
            height: 70px;
            border-radius: var(--border-radius-md);
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .game-details-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .game-details-info {
            flex: 1;
        }
        .game-details-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--text-color);
        }
        .game-details-meta {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        .download-section {
            margin-bottom: 25px;
        }
        .download-btn-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .download-btn {
            display: block;
            width: 48%;
            padding: 16px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(74, 134, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: var(--transition);
        }
        .download-btn:hover::before {
            left: 100%;
        }
        .download-btn:disabled {
            background: linear-gradient(90deg, #3a3a3a, #4a4a4a);
            cursor: not-allowed;
            box-shadow: none;
        }
        .download-btn:not(:disabled):active {
            transform: scale(0.97);
        }
        .details-library-btn {
            width: 48%;
            padding: 16px;
            background: var(--card-bg);
            color: var(--text-color);
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .details-library-btn.active {
            background: var(--success-color);
            color: white;
        }
        .progress-container {
            margin: 20px 0;
            display: none;
        }
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        .progress-text {
            font-size: 14px;
            color: var(--text-secondary);
        }
        .progress-percent {
            font-weight: 600;
            color: var(--accent-color);
        }
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            margin-bottom: 15px;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: var(--border-radius-sm);
            width: 0%;
            transition: width 0.3s ease;
        }
        .download-stats {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            font-family: monospace;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
        }
        .download-stats-item {
            display: flex;
            flex-direction: column;
        }
        .download-stats-value {
            color: var(--text-color);
            font-weight: 600;
            margin-top: 3px;
        }
        .download-visualizer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
        }
        .download-visualizer {
            display: none;
            height: 30px;
            width: 200px;
            display: flex;
            align-items: flex-end;
            gap: 2px;
            padding: 5px 0;
        }
        .download-bar {
            width: 4px;
            background: var(--accent-color);
            border-radius: 2px;
            transition: height 0.1s ease;
        }
        .visualizer-toggle {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            margin-left: auto;
        }
        .visualizer-toggle:hover {
            background: rgba(74, 134, 255, 0.2);
            transform: rotate(-10deg);
        }
        
        /* РќРћР’РђРЇ РЎРРЎРўР•РњРђ РЎРљР РРќРЁРћРўРћР’ */
        .screenshots-section {
            margin: 25px 0;
        }
        
        .screenshots-container {
            position: relative;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .screenshots-slider {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        
        .screenshots-slider::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        .screenshot-item {
            min-width: 160px;
            height: 105px;
            border-radius: 12px;
            overflow: hidden;
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .screenshot-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .screenshot-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .screenshot-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            opacity: 0.7;
            transition: opacity 0.3s;
            font-size: 20px;
            font-weight: bold;
        }
        
        .screenshot-nav:hover {
            opacity: 1;
            background: rgba(0, 0, 0, 0.7);
        }
        
        .screenshot-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .screenshot-nav.prev {
            left: 5px;
        }
        
        .screenshot-nav.next {
            right: 5px;
        }
        /* РљРћРќР•Р¦ РЎРРЎРўР•РњР« РЎРљР РРќРЁРћРўРћР’ */
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin: 25px 0 12px;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .section-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-md);
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .section-content p {
            margin-bottom: 10px;
            color: var(--text-secondary);
        }
        .section-content ul {
            list-style-type: none;
            padding-left: 10px;
        }
        .section-content li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
            color: var(--text-secondary);
        }
        .section-content li::before {
            content: 'вЂў';
            color: var(--accent-color);
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        .new-indicator {
            width: 10px;
            height: 10px;
            background-color: var(--success-color);
            border-radius: 50%;
            margin-left: 10px;
            animation: flash 1.5s infinite;
        }
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .status-message {
            padding: 12px 15px;
            border-radius: var(--border-radius-md);
            margin-top: 15px;
            font-size: 14px;
            display: none;
        }
        .status-success {
            background: rgba(52, 199, 89, 0.1);
            color: var(--success-color);
            display: block;
        }
        .status-error {
            background: rgba(255, 59, 48, 0.1);
            color: var(--error-color);
            display: block;
        }
        /* Profile modal */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .profile-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        .profile-modal-content {
            background: var(--secondary-bg);
            border-radius: var(--border-radius-lg);
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .profile-modal.active .profile-modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        .profile-header {
            position: relative;
            height: 160px;
            overflow: hidden;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }
        .banner-placeholder {
            width: 100%;
            height: 100%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 14px;
            text-align: center;
            padding: 0 20px;
            cursor: pointer;
            background-size: cover;
            background-position: center;
        }
        .profile-info {
            padding: 20px;
            position: relative;
            margin-top: -60px;
        }
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--secondary-bg);
            overflow: hidden;
            margin: 0 auto 15px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            font-size: 24px;
        }
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .profile-edit {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }
        .profile-edit:hover {
            transform: scale(1.1);
        }
        .profile-name {
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .verified-badge {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
        }
        .verified-badge img {
            width: 15px;
            height: 15px;
        }
        .verified-tooltip {
            position: absolute;
            top: -40px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 11px;
            white-space: nowrap;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 250px;
            word-break: break-word;
            line-height: 1.3;
        }
        .verified-tooltip.show {
            opacity: 1;
        }
        .profile-username {
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .badge-icon {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            overflow: hidden;
        }
        .badge-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .profile-bio {
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            min-height: 40px;
        }
        .profile-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
            gap: 0;
        }
        .profile-tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            cursor: pointer;
            font-weight: 500;
            font-size: 15px;
            color: var(--text-secondary);
            transition: var(--transition);
            position: relative;
        }
        .profile-tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--accent-color);
            transition: var(--transition);
        }
        .profile-tab.active {
            color: var(--accent-color);
        }
        .profile-tab.active::after {
            width: 80%;
        }
        .profile-content {
            padding: 0 20px 20px;
        }
        .library-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        .library-item {
            aspect-ratio: 9/16;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            position: relative;
        }
        .library-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .library-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        }
        .library-item-title {
            position: absolute;
            bottom: 8px;
            left: 8px;
            right: 8px;
            color: white;
            font-size: 11px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }
        .plugg-auth-container {
            padding: 0 20px 20px;
        }
        .plugg-auth-content {
            text-align: center;
        }
        .plugg-auth-gif {
            margin-bottom: 15px;
            border-radius: var(--border-radius-md);
            overflow: hidden;
        }
        .plugg-auth-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 10px;
        }
        .plugg-auth-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        .plugg-auth-status {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            min-height: 20px;
        }
        .plugg-auth-button-container {
            margin-top: 10px;
        }
        .plugg-auth-button {
            display: inline-block;
            width: 100%;
            max-width: 300px;
            padding: 14px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(74, 134, 255, 0.3);
            text-decoration: none;
        }
        .plugg-auth-button:active {
            transform: scale(0.97);
        }
        .registration-progress {
            display: none;
            padding: 20px;
            text-align: center;
        }
        .loader {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .progress-text {
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        .progress-subtext {
            color: var(--text-secondary);
            font-size: 13px;
        }
        .profile-settings {
            display: none;
        }
        .setting-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .setting-label {
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }
        .setting-value {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }
        .setting-value:hover {
            color: var(--accent-color);
        }
        .setting-input {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-sm);
            color: var(--text-color);
            font-size: 14px;
        }
        .save-btn {
            margin-top: 10px;
            padding: 10px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
        }
        .logout-btn {
            width: 100%;
            padding: 14px;
            background: rgba(255, 59, 48, 0.1);
            color: var(--error-color);
            border: none;
            border-radius: var(--border-radius-md);
            font-weight: 500;
            margin-top: 20px;
            cursor: pointer;
            transition: var(--transition);
        }
        .logout-btn:hover {
            background: rgba(255, 59, 48, 0.2);
        }
        .username-available {
            color: var(--success-color);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        .username-unavailable {
            color: var(--error-color);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        /* Footer with modern design */
        .footer {
            background: var(--secondary-bg);
            border-radius: var(--border-radius-lg);
            padding: 20px;
            margin-top: 30px;
            box-shadow: var(--shadow-soft);
        }
        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .footer-section {
            padding: 0 10px;
        }
        .footer-section h3 {
            font-size: 15px;
            margin-bottom: 10px;
            color: var(--text-color);
            font-weight: 600;
        }
        .footer-section p, .footer-section a {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 5px;
            text-decoration: none;
            line-height: 1.5;
        }
        .footer-section a {
            color: var(--accent-color);
            transition: var(--transition);
        }
        .footer-section a:hover {
            text-decoration: underline;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 10px;
        }
        .footer-bottom p {
            font-size: 12px;
            color: var(--text-secondary);
        }
        /* Back button with animation */
        .back-btn {
            display: inline-flex;
            align-items: center;
            padding: 10px 15px;
            background: var(--card-bg);
            color: var(--text-color);
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 15px;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: var(--transition);
        }
        .back-btn:hover::before {
            left: 100%;
        }
        .back-btn:hover {
            transform: translateX(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .details-library-btn {
            padding: 10px 15px;
            background: var(--card-bg);
            color: var(--text-color);
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }
        .details-library-btn.active {
            background: var(--success-color);
            color: white;
        }
        /* Banner selector */
        .banner-selector {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-bg);
            z-index: 3000;
            padding: 20px;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }
        .banner-selector.active {
            display: flex;
        }
        .banner-selector-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .banner-selector-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-color);
        }
        .banner-selector-close {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--secondary-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        .banner-selector-close:hover {
            transform: rotate(90deg);
            background: rgba(255, 255, 255, 0.1);
        }
        .banner-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: var(--secondary-bg);
            border-radius: var(--border-radius-md);
            margin-bottom: 20px;
            cursor: pointer;
            transition: var(--transition);
        }
        .banner-upload:hover {
            background: var(--card-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .banner-gallery {
            width: 100%;
            max-height: 50vh;
            overflow-y: auto;
            padding-right: 5px;
            margin-bottom: 20px;
        }
        .banner-gallery::-webkit-scrollbar {
            width: 6px;
        }
        .banner-gallery::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }
        .banner-gallery::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 3px;
        }
        .banner-gallery-item {
            width: 100%;
            height: 150px;
            border-radius: var(--border-radius-md);
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        .banner-gallery-item:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .banner-gallery-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .banner-gallery-item:hover::after {
            opacity: 1;
        }
        .banner-preview {
            display: none;
            width: 100%;
            padding: 15px;
            background: var(--secondary-bg);
            border-radius: var(--border-radius-md);
            margin-top: auto;
        }
        .banner-preview.active {
            display: block;
        }
        .banner-preview-img {
            width: 100%;
            height: 120px;
            border-radius: var(--border-radius-md);
            overflow: hidden;
            margin-bottom: 15px;
        }
        .banner-preview-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .banner-preview-actions {
            display: flex;
            gap: 10px;
        }
        .banner-preview-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        .banner-preview-btn#banner-cancel {
            background: var(--card-bg);
            color: var(--text-color);
        }
        .banner-preview-btn#banner-cancel:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .banner-preview-btn.apply {
            background: var(--accent-gradient);
            color: white;
        }
        .banner-preview-btn.apply:hover {
            opacity: 0.9;
        }
        /* Responsive design */
        @media (min-width: 768px) {
            .container {
                max-width: 750px;
            }
            .games-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .game-image {
                height: 160px;
            }
            .game-details-icon {
                width: 80px;
                height: 80px;
            }
            .game-details-title {
                font-size: 24px;
            }
            .library-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        /* Animations for UI elements */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.4s ease forwards;
        }
        .delay-1 {
            animation-delay: 0.1s;
        }
        .delay-2 {
            animation-delay: 0.2s;
        }
        .delay-3 {
            animation-delay: 0.3s;
        }
        /* Dark mode with strategic contrast improves readability */ 
        .tg-theme-dark {
            --primary-bg: #0a0a0a;
            --secondary-bg: #121212;
            --card-bg: #1a1a1a;
            --text-color: #ffffff;
            --text-secondary: #b0b0b0;
        }
        /* It's best to use dark color schemes with lighter, unsaturated accent colors */ 
        .tg-theme-light {
            --primary-bg: #f5f5f7;
            --secondary-bg: #ffffff;
            --card-bg: #ffffff;
            --text-color: #1c1c1c;
            --text-secondary: #636366;
            --accent-gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --accent-color: #4a86ff;
        }
        /* Avoid placing light-colored text on a bright gradient or dark text on a dark gradient */ 
        .gradient-text {
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        /* Mastering the Art of Dark UI Design: Leverage negative space */ 
        .negative-space {
            padding: 0 20px;
        }
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .profile-link-container {
            display: none;
        }
        .guest-view {
            pointer-events: none;
        }
        .guest-view .profile-edit,
        .guest-view .banner-edit,
        .guest-view .setting-value svg,
        .guest-view .logout-btn,
        .guest-view .badge-actions {
            display: none;
        }
        .development-message {
            text-align: center;
            color: var(--text-secondary);
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>PLUGG BOT</h1>
                <p>Р›СѓС‡С€Р°СЏ РєРѕР»Р»РµРєС†РёСЏ РїСЂРёРІРёРІР°С‚РѕРє РґР»СЏ СѓРґРѕР±РЅРѕРіРѕ СЃРєР°С‡РёРІР°РЅРёСЏ</p>
            </div>
            <div class="profile-btn" id="profile-btn">
                <svg class="profile-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
        </div>
        <div class="search-bar">
            <svg viewBox="0 0 24 24">
                <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z"/>
            </svg>
            <input type="text" placeholder="РџРѕРёСЃРє РёРіСЂ..." id="search-input">
        </div>
        <div class="tabs">
            <div class="tab active" data-tab="all">РџР РР’РђРўРљР</div>
            <div class="tab" data-tab="popular">РџР РР’РђРўРљР Р”Р›РЇ РџРљ</div>
        </div>
        <div class="tab-content active" id="all-tab">
            <div class="games-grid"></div>
        </div>
        <div class="tab-content" id="popular-tab">
            <div class="games-grid"></div>
        </div>
        <!-- Р”РµС‚Р°Р»Рё РёРіСЂС‹ (РѕР±С‰РёР№) -->
        <div class="game-details" id="game-details">
            <button class="back-btn" id="back-btn">в†ђ РќР°Р·Р°Рґ</button>
            <div class="game-details-content">
                <div class="game-details-header">
                    <div class="game-details-icon">
                        <img id="details-image" src="" alt="">
                    </div>
                    <div class="game-details-info">
                        <div class="game-details-title" id="details-title"></div>
                        <div class="game-details-meta" id="details-meta"></div>
                    </div>
                </div>
                <div class="download-section">
                    <div class="download-btn-container">
                        <button id="download-btn" class="download-btn">РЎРєР°С‡Р°С‚СЊ</button>
                        <button class="details-library-btn" id="details-library-btn">Р”РѕР±Р°РІРёС‚СЊ РІ Р±РёР±Р»РёРѕС‚РµРєСѓ</button>
                    </div>
                    <div class="progress-container" id="progress-container">
                        <div class="progress-info">
                            <span class="progress-text">РЎС‚Р°С‚СѓСЃ: <span id="status-text">Р“РѕС‚РѕРІ Рє Р·Р°РіСЂСѓР·РєРµ</span></span>
                            <span class="progress-percent" id="progress-percent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="download-stats">
                            <div class="download-stats-item">
                                <span>РЎРєР°С‡Р°РЅРѕ</span>
                                <span class="download-stats-value" id="downloaded-size">0 MB</span>
                            </div>
                            <div class="download-stats-item">
                                <span>РЎРєРѕСЂРѕСЃС‚СЊ</span>
                                <span class="download-stats-value" id="download-speed">0 KB/s</span>
                            </div>
                            <div class="download-stats-item">
                                <span>РџРёРЅРі</span>
                                <span class="download-stats-value" id="ping-value">-- ms</span>
                            </div>
                        </div>
                        <div class="download-visualizer-container">
                            <div class="download-visualizer" id="download-visualizer"></div>
                            <div class="visualizer-toggle" id="visualizer-toggle">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M17 5v14M7 5v14M2 5h20M2 19h20"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="status-message" class="status-message"></div>
                
                <!-- РЎР•РљР¦РРЇ РЎРљР РРќРЁРћРўРћР’ -->
                <div class="screenshots-section">
                    <div class="section-title">РЎРєСЂРёРЅС€РѕС‚С‹</div>
                    <div class="screenshots-container">
                        <button class="screenshot-nav prev"><</button>
                        <div class="screenshots-slider" id="screenshots-slider">
                            <!-- РЎРєСЂРёРЅС€РѕС‚С‹ Р±СѓРґСѓС‚ РґРѕР±Р°РІР»РµРЅС‹ Р·РґРµСЃСЊ РґРёРЅР°РјРёС‡РµСЃРєРё -->
                        </div>
                        <button class="screenshot-nav next">></button>
                    </div>
                </div>
                <!-- РљРћРќР•Р¦ РЎР•РљР¦РР РЎРљР РРќРЁРћРўРћР’ -->
                
                <div class="section-title">РћРїРёСЃР°РЅРёРµ</div>
                <div class="section-content" id="details-description"></div>
                <div class="section-title">Р§С‚Рѕ РЅРѕРІРѕРіРѕ<span class="new-indicator"></span></div>
                <div class="section-content" id="details-whats-new"></div>
            </div>
        </div>
        <!-- Profile Modal -->
        <div class="profile-modal" id="profile-modal">
            <div class="profile-modal-content">
                <div class="profile-header">
                    <div class="banner-placeholder" id="banner-placeholder">
                        Р”РѕР±Р°РІСЊС‚Рµ СЃРІРѕР№ Р±Р°РЅРЅРµСЂ, С‡С‚РѕР±С‹ РІС‹РґРµР»РёС‚СЊСЃСЏ СЃСЂРµРґРё РґСЂСѓРіРёС… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№
                    </div>
                </div>
                <div class="profile-info">
                    <div class="profile-avatar" id="profile-avatar">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div class="profile-name" id="profile-name">Р“РѕСЃС‚СЊ</div>
                    <div class="profile-username" id="profile-username">@guest</div>
                    <div class="profile-bio" id="profile-bio">Р”РѕР±Р°РІСЊС‚Рµ РѕРїРёСЃР°РЅРёРµ РїСЂРѕС„РёР»СЏ, С‡С‚РѕР±С‹ СЂР°СЃСЃРєР°Р·Р°С‚СЊ Рѕ СЃРµР±Рµ</div>
                    <div class="profile-edit" id="profile-edit">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                    </div>
                </div>
                <div class="profile-tabs">
                    <div class="profile-tab active" data-tab="library">Р‘РёР±Р»РёРѕС‚РµРєР°</div>
                    <div class="profile-tab" data-tab="settings">РќР°СЃС‚СЂРѕР№РєРё</div>
                </div>
                <div class="profile-content">
                    <div class="profile-section active" id="library-section">
                        <div class="library-grid" id="library-grid">
                            <!-- Library items will be added here -->
                        </div>
                    </div>
                    <div class="profile-section profile-settings" id="settings-section">
                        <div class="setting-item">
                            <div class="setting-label">РРјСЏ</div>
                            <input type="text" class="setting-input" id="name-input" placeholder="Р’РІРµРґРёС‚Рµ РІР°С€Рµ РёРјСЏ">
                            <button class="save-btn" id="save-name">РЎРѕС…СЂР°РЅРёС‚СЊ</button>
                            <div class="username-available" id="name-available">РРјСЏ СѓСЃРїРµС€РЅРѕ РѕР±РЅРѕРІР»РµРЅРѕ</div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">Р®Р·РµСЂРЅРµР№Рј</div>
                            <input type="text" class="setting-input" id="username-input" placeholder="Р’РІРµРґРёС‚Рµ РІР°С€ СЋР·РµСЂРЅРµР№Рј">
                            <button class="save-btn" id="save-username">РЎРѕС…СЂР°РЅРёС‚СЊ</button>
                            <div class="username-available" id="username-available">Р®Р·РµСЂРЅРµР№Рј РґРѕСЃС‚СѓРїРµРЅ</div>
                            <div class="username-unavailable" id="username-unavailable">Р­С‚РѕС‚ СЋР·РµСЂРЅРµР№Рј СѓР¶Рµ Р·Р°РЅСЏС‚</div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">РћРїРёСЃР°РЅРёРµ РїСЂРѕС„РёР»СЏ</div>
                            <textarea class="setting-input" id="bio-input" rows="3" placeholder="Р Р°СЃСЃРєР°Р¶РёС‚Рµ РЅРµРјРЅРѕРіРѕ Рѕ СЃРµР±Рµ..."></textarea>
                            <button class="save-btn" id="save-bio">РЎРѕС…СЂР°РЅРёС‚СЊ</button>
                        </div>
                        <button class="logout-btn" id="logout-btn">Р’С‹Р№С‚Рё РёР· Р°РєРєР°СѓРЅС‚Р°</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Banner Selector -->
        <div class="banner-selector" id="banner-selector">
            <div class="banner-selector-header">
                <div class="banner-selector-title">Р’С‹Р±РµСЂРёС‚Рµ Р±Р°РЅРЅРµСЂ</div>
                <div class="banner-selector-close" id="banner-selector-close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6 6 18"></path>
                        <path d="m6 6 12 12"></path>
                    </svg>
                </div>
            </div>
            <div class="banner-upload" id="banner-upload">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="9" cy="9" r="2"></circle>
                    <!-- РСЃРїСЂР°РІР»РµРЅРѕ: Р·Р°РјРµРЅР° РєРёСЂРёР»Р»РёС‡РµСЃРєРѕР№ "Рј" РЅР° Р»Р°С‚РёРЅСЃРєСѓСЋ "m" -->
                    <path d="m21 15-3.086-3.086a2 2 0 0 1-2.828 0L6 21"></path>
                </svg>
                <div>Р’С‹Р±СЂР°С‚СЊ РёР· РіР°Р»РµСЂРµРё</div>
            </div>
            <div class="banner-gallery" id="banner-gallery">
                <!-- Gallery items will be added here -->
            </div>
            <div class="banner-preview" id="banner-preview">
                <div class="banner-preview-img">
                    <img id="banner-preview-img" src="" alt="Preview">
                </div>
                <div class="banner-preview-actions">
                    <button class="banner-preview-btn" id="banner-cancel">РћС‚РјРµРЅР°</button>
                    <button class="banner-preview-btn apply" id="banner-apply">РџСЂРёРјРµРЅРёС‚СЊ</button>
                </div>
            </div>
        </div>
        <!-- Auth Modal -->
        <div class="profile-modal" id="auth-modal">
            <div class="profile-modal-content">
                <div class="profile-info" style="margin-top: 0; padding-top: 30px; padding-bottom: 10px;">
                    <h2 style="text-align: center; margin-bottom: 10px;">Р”РѕР±СЂРѕ РїРѕР¶Р°Р»РѕРІР°С‚СЊ</h2>
                    <p style="text-align: center; color: var(--text-secondary);">Р’РѕР№РґРёС‚Рµ РІ СЃРІРѕР№ Р°РєРєР°СѓРЅС‚, С‡С‚РѕР±С‹ СЃРѕС…СЂР°РЅСЏС‚СЊ РїСЂРёРІР°С‚РєРё РІ Р±РёР±Р»РёРѕС‚РµРєРµ</p>
                </div>
                <div class="plugg-auth-container">
                    <div class="plugg-auth-content">
                        <div class="plugg-auth-gif">
                            <div class="tenor-gif-embed" data-postid="7138793964961059735" data-share-method="host" data-aspect-ratio="1.76596" data-width="100%">
                                <a href="https://tenor.com/view/tsunya-tsunyash-vstars-anime-vtuber-gif-7138793964961059735">Tsunya Tsunyash Sticker</a> from <a href="https://tenor.com/search/tsunya-stickers">Tsunya Stickers</a>
                            </div>
                            <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
                        </div>
                        <h3 class="plugg-auth-title">PLUGG ID</h3>
                        <p class="plugg-auth-description">РџСЂРѕСЃС‚Р°СЏ Рё Р±РµР·РѕРїР°СЃРЅР°СЏ Р°РІС‚РѕСЂРёР·Р°С†РёСЏ С‡РµСЂРµР· Telegram.</p>
                        <div class="plugg-auth-status" id="plugg-auth-status">
                            Р”Р»СЏ РІС…РѕРґР° РЅР°Р¶РјРёС‚Рµ РЅР° РєРЅРѕРїРєСѓ РЅРёР¶Рµ
                        </div>
                        <div class="plugg-auth-button-container" id="plugg-auth-button-container">
                            <button class="plugg-auth-button" id="telegram-auth-button">Р’РѕР№С‚Рё С‡РµСЂРµР· Telegram</button>
                        </div>
                    </div>
                </div>
                <div class="registration-progress" id="registration-progress">
                    <div class="loader"></div>
                    <div class="progress-text">РђРІС‚РѕСЂРёР·Р°С†РёСЏ С‡РµСЂРµР· Telegram...</div>
                    <div class="progress-subtext">РџРѕР¶Р°Р»СѓР№СЃС‚Р°, РїРѕРґРѕР¶РґРёС‚Рµ</div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Рћ РЅР°СЃ</h3>
                    <p>PLUGG BOT - Р»СѓС‡С€РёР№ Р±РѕС‚ РґР»СЏ РїРѕРёСЃРєР° Рё СЃРєР°С‡РёРІР°РЅРёСЏ РїСЂРёРІРёРІР°С‚РѕРє. РњС‹ РїСЂРµРґР»Р°РіР°РµРј РѕРіСЂРѕРјРЅСѓСЋ РєРѕР»Р»РµРєС†РёСЋ РїРѕРїСѓР»СЏСЂРЅС‹С… РїСЂРёРІРёРІР°С‚РѕРє.</p>
                </div>
                <div class="footer-section">
                    <h3>РќР°С€Рё РєРѕРЅС‚Р°РєС‚С‹</h3>
                    <p>Р’Р»Р°РґРµР»РµС† Р±РѕС‚Р°: <a href="https://t.me/kurune" target="_blank">РџР»Р°РіРіРё</a></p>
                    <p>РџРѕ СЂР°Р·РЅС‹Рј РІРѕРїСЂРѕСЃР°Рј: <a href="https://t.me/soukita" target="_blank">РљРёС‚Р°</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>В© 2025 Pluggs. Р’СЃРµ РїСЂР°РІР° Р·Р°С‰РёС‰РµРЅС‹.</p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Telegram Web App
            const tg = window.Telegram.WebApp;
            tg.expand();
            tg.ready();
            // Р­Р»РµРјРµРЅС‚С‹ РёРЅС‚РµСЂС„РµР№СЃР° (СЃ РїСЂРѕРІРµСЂРєРѕР№ РЅР° СЃСѓС‰РµСЃС‚РІРѕРІР°РЅРёРµ)
            const downloadBtn = document.getElementById('download-btn');
            const progressFill = document.getElementById('progress-fill');
            const progressPercent = document.getElementById('progress-percent');
            const statusText = document.getElementById('status-text');
            const statusMessage = document.getElementById('status-message');
            const progressContainer = document.getElementById('progress-container');
            const backBtn = document.getElementById('back-btn');
            const detailsLibraryBtn = document.getElementById('details-library-btn');
            const gameDetails = document.getElementById('game-details');
            const detailsTitle = document.getElementById('details-title');
            const detailsImage = document.getElementById('details-image');
            const detailsMeta = document.getElementById('details-meta');
            const detailsDescription = document.getElementById('details-description');
            const detailsWhatsNew = document.getElementById('details-whats-new');
            const searchInput = document.getElementById('search-input');
            const profileBtn = document.getElementById('profile-btn');
            const profileModal = document.getElementById('profile-modal');
            const authModal = document.getElementById('auth-modal');
            const pluggAuthStatus = document.getElementById('plugg-auth-status');
            const pluggAuthButtonContainer = document.getElementById('plugg-auth-button-container');
            const telegramAuthButton = document.getElementById('telegram-auth-button');
            const registrationProgress = document.getElementById('registration-progress');
            const profileName = document.getElementById('profile-name');
            const profileUsername = document.getElementById('profile-username');
            const profileBio = document.getElementById('profile-bio');
            const profileAvatar = document.getElementById('profile-avatar');
            const bannerPlaceholder = document.getElementById('banner-placeholder');
            const profileEdit = document.getElementById('profile-edit');
            const profileTabs = document.querySelectorAll('.profile-tab');
            const librarySection = document.getElementById('library-section');
            const settingsSection = document.getElementById('settings-section');
            const nameInput = document.getElementById('name-input');
            const usernameInput = document.getElementById('username-input');
            const bioInput = document.getElementById('bio-input');
            const saveNameBtn = document.getElementById('save-name');
            const saveUsernameBtn = document.getElementById('save-username');
            const saveBioBtn = document.getElementById('save-bio');
            const nameAvailable = document.getElementById('name-available');
            const usernameAvailable = document.getElementById('username-available');
            const usernameUnavailable = document.getElementById('username-unavailable');
            const logoutBtn = document.getElementById('logout-btn');
            const libraryGrid = document.getElementById('library-grid');
            const visualizerToggle = document.getElementById('visualizer-toggle');
            const downloadVisualizer = document.getElementById('download-visualizer');
            const downloadedSize = document.getElementById('downloaded-size');
            const downloadSpeed = document.getElementById('download-speed');
            const pingValue = document.getElementById('ping-value');
            const bannerSelector = document.getElementById('banner-selector');
            const bannerSelectorClose = document.getElementById('banner-selector-close');
            const bannerGallery = document.getElementById('banner-gallery');
            const bannerUpload = document.getElementById('banner-upload');
            const bannerPreview = document.getElementById('banner-preview');
            const bannerPreviewImg = document.getElementById('banner-preview-img');
            const bannerCancelBtn = document.getElementById('banner-cancel');
            const bannerApplyBtn = document.getElementById('banner-apply');
            const screenshotsSlider = document.getElementById('screenshots-slider');
            const prevBtn = document.querySelector('.screenshot-nav.prev');
            const nextBtn = document.querySelector('.screenshot-nav.next');
            // РџРµСЂРµРјРµРЅРЅС‹Рµ РґР»СЏ РѕС‚СЃР»РµР¶РёРІР°РЅРёСЏ СЃРѕСЃС‚РѕСЏРЅРёСЏ
            let isDownloading = false;
            let currentTab = 'all';
            let xhr = null;
            let currentDownloadUrl = '';
            let currentFileName = '';
            let currentGameTitle = '';
            let currentUser = null;
            let downloadStartTime = 0;
            let downloadedBytes = 0;
            let totalBytes = 0;
            let isVisualizerActive = false;
            let visualizerInterval = null;
            let selectedBannerFile = null;
            let isOwner = true; // РџРѕ СѓРјРѕР»С‡Р°РЅРёСЋ РІР»Р°РґРµР»РµС†
            let currentGameId = null;
            // РЎРѕР·РґР°РµРј РІРёР·СѓР°Р»РёР·Р°С‚РѕСЂ Р·Р°РіСЂСѓР·РєРё
            function createDownloadVisualizer() {
                if (!downloadVisualizer) return;
                downloadVisualizer.innerHTML = '';
                for (let i = 0; i < 25; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'download-bar';
                    bar.style.height = '2px';
                    downloadVisualizer.appendChild(bar);
                }
            }
            // РђРЅРёРјРёСЂСѓРµРј РІРёР·СѓР°Р»РёР·Р°С‚РѕСЂ Р·Р°РіСЂСѓР·РєРё
            function animateDownloadVisualizer() {
                if (!isVisualizerActive || !downloadVisualizer) return;
                const bars = document.querySelectorAll('.download-bar');
                bars.forEach(bar => {
                    const height = Math.floor(Math.random() * 25) + 2;
                    bar.style.height = `${height}px`;
                });
            }
            // РџРµСЂРµРєР»СЋС‡РµРЅРёРµ РІРёР·СѓР°Р»РёР·Р°С‚РѕСЂР° Р·Р°РіСЂСѓР·РєРё
            if (visualizerToggle) {
                visualizerToggle.addEventListener('click', () => {
                    isVisualizerActive = !isVisualizerActive;
                    if (isVisualizerActive) {
                        downloadVisualizer.style.display = 'flex';
                        visualizerToggle.innerHTML = `
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M5 18h14M5 6h14"></path>
                            </svg>
                        `;
                        if (visualizerInterval) clearInterval(visualizerInterval);
                        visualizerInterval = setInterval(animateDownloadVisualizer, 80);
                    } else {
                        downloadVisualizer.style.display = 'none';
                        visualizerToggle.innerHTML = `
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M17 5v14M7 5v14M2 5h20M2 19h20"></path>
                            </svg>
                        `;
                        if (visualizerInterval) clearInterval(visualizerInterval);
                        visualizerInterval = null;
                    }
                });
            }
            // РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РІРёР·СѓР°Р»РёР·Р°С‚РѕСЂР° Р·Р°РіСЂСѓР·РєРё
            createDownloadVisualizer();
            // Р­РјСѓР»СЏС†РёСЏ РїРёРЅРіР°
            function simulatePing() {
                if (!pingValue) return;
                const minPing = 30;
                const maxPing = 120;
                const ping = Math.floor(Math.random() * (maxPing - minPing + 1)) + minPing;
                pingValue.textContent = `${ping} ms`;
            }
            // РћР±РЅРѕРІР»РµРЅРёРµ СЃС‚Р°С‚РёСЃС‚РёРєРё Р·Р°РіСЂСѓР·РєРё
            function updateDownloadStats(loaded, total) {
                if (total === 0 || !downloadedSize || !downloadSpeed) return;
                const mbLoaded = (loaded / (1024 * 1024)).toFixed(2);
                downloadedSize.textContent = `${mbLoaded} MB`;
                if (downloadStartTime > 0) {
                    const elapsed = (Date.now() - downloadStartTime) / 1000; // seconds
                    if (elapsed > 0) {
                        const speed = (loaded / elapsed) / 1024; // KB/s
                        downloadSpeed.textContent = `${speed.toFixed(2)} KB/s`;
                    }
                }
            }
            // РџРѕР»СѓС‡РµРЅРёРµ СЃРѕС…СЂР°РЅРµРЅРЅС‹С… РґР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
            function getSavedUserData(telegram_id) {
                const savedUsers = JSON.parse(localStorage.getItem('plugg_saved_users') || '{}');
                return savedUsers[telegram_id] || null;
            }
            // РЎРѕС…СЂР°РЅРµРЅРёРµ РґР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
            function saveUserData() {
                if (!currentUser) return;
                const savedUsers = JSON.parse(localStorage.getItem('plugg_saved_users') || '{}');
                savedUsers[currentUser.telegram_id] = {
                    first_name: currentUser.first_name,
                    last_name: currentUser.last_name,
                    username: currentUser.username,
                    bio: currentUser.bio,
                    banner: currentUser.banner,
                    library: currentUser.library,
                };
                localStorage.setItem('plugg_saved_users', JSON.stringify(savedUsers));
            }
            // РџСЂРѕРІРµСЂРєР° РЅР°Р»РёС‡РёСЏ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ РІ localStorage
            function checkUser() {
                const user = localStorage.getItem('plugg_user');
                if (user) {
                    try {
                        currentUser = JSON.parse(user);
                        if (tg.initDataUnsafe && tg.initDataUnsafe.user && currentUser.telegram_id !== tg.initDataUnsafe.user.id) {
                            localStorage.removeItem('plugg_user');
                            return false;
                        }
                        // Р’РѕСЃСЃС‚Р°РЅР°РІР»РёРІР°РµРј СЃРѕС…СЂР°РЅРµРЅРЅС‹Рµ РґР°РЅРЅС‹Рµ
                        const savedData = getSavedUserData(currentUser.telegram_id);
                        if (savedData) {
                            Object.assign(currentUser, savedData);
                            localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                        }
                        updateProfileUI();
                        return true;
                    } catch (e) {
                        console.error('Error parsing user data', e);
                        localStorage.removeItem('plugg_user');
                        return false;
                    }
                }
                return false;
            }
            // РћР±РЅРѕРІР»РµРЅРёРµ UI РїСЂРѕС„РёР»СЏ
            function updateProfileUI() {
                if (!profileName || !profileUsername || !profileBio || !nameInput || 
                    !usernameInput || !bioInput || !libraryGrid) return;
                if (currentUser) {
                    // РџСЂРѕРІРµСЂСЏРµРј РІРµСЂРёС„РёРєР°С†РёСЋ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
                    const isVerified = isUserVerified(currentUser.telegram_id);
                    // РћР±РЅРѕРІР»СЏРµРј РёРјСЏ
                    let nameHTML = currentUser.first_name + (currentUser.last_name ? ' ' + currentUser.last_name : '');
                    // Р”РѕР±Р°РІР»СЏРµРј РіР°Р»РѕС‡РєСѓ РІРµСЂРёС„РёРєР°С†РёРё, РµСЃР»Рё РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІРµСЂРёС„РёС†РёСЂРѕРІР°РЅ
                    if (isVerified) {
                        nameHTML += `
                            <div class="verified-badge" id="verified-badge">
                                <img src="https://github.com/MrRazion/pluggbotest.github.io/blob/main/badges/status/1761634926844.png?raw=true" alt="Verified">
                                <div class="verified-tooltip" id="verified-tooltip">
                                    ${getVerifiedDescription(currentUser.telegram_id, currentUser.first_name)}
                                </div>
                            </div>
                        `;
                    }
                    // РћР±РЅРѕРІР»СЏРµРј РёРјСЏ СЃ РіР°Р»РѕС‡РєРѕР№ РІРµСЂРёС„РёРєР°С†РёРё Рё Р·РЅР°С‡РєР°РјРё
                    profileName.innerHTML = nameHTML;
                    nameInput.value = currentUser.first_name + (currentUser.last_name ? ' ' + currentUser.last_name : '');
                    // РћР±РЅРѕРІР»СЏРµРј СЋР·РµСЂРЅРµР№Рј
                    const usernameText = currentUser.username ? `@${currentUser.username}` : 'РќРµ СѓРєР°Р·Р°РЅ';
                    profileUsername.innerHTML = usernameText;
                    usernameInput.value = currentUser.username || '';
                    // РћР±РЅРѕРІР»СЏРµРј Р±РёРѕ
                    profileBio.textContent = currentUser.bio || 'Р”РѕР±Р°РІСЊС‚Рµ РѕРїРёСЃР°РЅРёРµ РїСЂРѕС„РёР»СЏ, С‡С‚РѕР±С‹ СЂР°СЃСЃРєР°Р·Р°С‚СЊ Рѕ СЃРµР±Рµ';
                    bioInput.value = currentUser.bio || '';
                    // РћР±РЅРѕРІР»СЏРµРј Р°РІР°С‚Р°СЂ
                    if (currentUser.avatar) {
                        profileAvatar.innerHTML = `<img src="${currentUser.avatar}" alt="РђРІР°С‚Р°СЂ">`;
                    }
                    // РћР±РЅРѕРІР»СЏРµРј Р±Р°РЅРЅРµСЂ
                    if (currentUser.banner) {
                        bannerPlaceholder.style.backgroundImage = `url('${currentUser.banner}')`;
                        bannerPlaceholder.style.backgroundSize = 'cover';
                        bannerPlaceholder.style.backgroundPosition = 'center';
                        bannerPlaceholder.textContent = '';
                    } else {
                        bannerPlaceholder.style.background = 'var(--accent-gradient)';
                        bannerPlaceholder.style.backgroundSize = '';
                        bannerPlaceholder.style.backgroundPosition = '';
                        bannerPlaceholder.textContent = 'Р”РѕР±Р°РІСЊС‚Рµ СЃРІРѕР№ Р±Р°РЅРЅРµСЂ, С‡С‚РѕР±С‹ РІС‹РґРµР»РёС‚СЊСЃСЏ СЃСЂРµРґРё РґСЂСѓРіРёС… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№';
                    }
                    // РћР±РЅРѕРІР»СЏРµРј Р±РёР±Р»РёРѕС‚РµРєСѓ
                    updateLibraryUI();
                    // Р”РѕР±Р°РІР»СЏРµРј РѕР±СЂР°Р±РѕС‚С‡РёРє РґР»СЏ РіР°Р»РѕС‡РєРё РІРµСЂРёС„РёРєР°С†РёРё
                    const verifiedBadge = document.getElementById('verified-badge');
                    if (verifiedBadge) {
                        const tooltip = document.getElementById('verified-tooltip');
                        verifiedBadge.addEventListener('click', () => {
                            tooltip.classList.add('show');
                            tooltip.style.display = 'block';
                            setTimeout(() => {
                                tooltip.classList.remove('show');
                            }, 10000);
                        });
                    }
                    // РџСЂРѕРІРµСЂСЏРµРј, СЏРІР»СЏРµС‚СЃСЏ Р»Рё РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РІР»Р°РґРµР»СЊС†РµРј
                    if (!isOwner) {
                        profileModal.classList.add('guest-view');
                    } else {
                        profileModal.classList.remove('guest-view');
                    }
                }
            }
            // РџСЂРѕРІРµСЂРєР° РІРµСЂРёС„РёРєР°С†РёРё РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
            function isUserVerified(telegram_id) {
                const verifiedUsers = [5772425643, 7942740523, 5507094612];
                return verifiedUsers.includes(Number(telegram_id));
            }
            // РџРѕР»СѓС‡РµРЅРёРµ РѕРїРёСЃР°РЅРёСЏ РІРµСЂРёС„РёРєР°С†РёРё
            function getVerifiedDescription(telegram_id, nickname) {
                const verifiedUsers = {
                    5772425643: `${nickname} is the official person and creator of the project.`,
                    7942740523: `${nickname} is the official tester and assistant of the project.`,
                    5507094612: `${nickname} supported the development of the project and received a special badge.`
                };
                return verifiedUsers[telegram_id] || '';
            }
            // РћР±РЅРѕРІР»РµРЅРёРµ UI Р±РёР±Р»РёРѕС‚РµРєРё
            function updateLibraryUI() {
                if (!libraryGrid) return;
                libraryGrid.innerHTML = '';
                if (!currentUser || !currentUser.library || currentUser.library.length === 0) {
                    libraryGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 20px; color: var(--text-secondary);">
                            Р’Р°С€Р° Р±РёР±Р»РёРѕС‚РµРєР° РїСѓСЃС‚Р°. Р”РѕР±Р°РІР»СЏР№С‚Рµ РїСЂРёРІРёРІР°С‚РєРё РІ Р±РёР±Р»РёРѕС‚РµРєСѓ, С‡С‚РѕР±С‹ РЅР°Р№С‚Рё РёС… Р·РґРµСЃСЊ!
                        </div>
                    `;
                    return;
                }
                currentUser.library.forEach(gameId => {
                    const game = games.find(g => g.id === gameId);
                    if (game) {
                        const item = document.createElement('div');
                        item.className = 'library-item animate-fade-in-up';
                        item.innerHTML = `
                            <img src="${game.image}" alt="${game.title}">
                            <div class="library-item-title">${game.title}</div>
                        `;
                        libraryGrid.appendChild(item);
                    }
                });
            }
            // Р”Р°РЅРЅС‹Рµ РёРіСЂ (СЃ РґРѕР±Р°РІР»РµРЅРЅС‹РјРё СЃРєСЂРёРЅС€РѕС‚Р°РјРё)
            const games = [
                {
                    id: 'standrise',
                    title: 'StandRise',
                    description: 'РџСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ StandRise - СЌС‚Рѕ РїСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ РґР»СЏ РїРѕРїСѓР»СЏСЂРЅРѕР№ РёРіСЂС‹ Standoff 2, РєРѕС‚РѕСЂС‹Р№ РѕС‚РєСЂС‹РІР°РµС‚ РїРµСЂРµРґ РёРіСЂРѕРєР°РјРё Р±РµР·РіСЂР°РЅРёС‡РЅС‹Рµ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё Рё РЅРѕРІСѓСЋ СЃС‚РµРїРµРЅСЊ СЃРІРѕР±РѕРґС‹. Р—РґРµСЃСЊ РЅРµС‚ СЃС‚СЂРѕРіРёС… РѕРіСЂР°РЅРёС‡РµРЅРёР№, РєРѕС‚РѕСЂС‹Рµ СЃРґРµСЂР¶РёРІР°СЋС‚ РІР°С€ РёРіСЂРѕРІРѕР№ РїСЂРѕС†РµСЃСЃ, Р° РІРµСЃСЊ РєРѕРЅС‚РµРЅС‚ СЃС‚Р°РЅРѕРІРёС‚СЃСЏ РґРѕСЃС‚СѓРїРЅС‹Рј Р±РµР· РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… СѓСЃРёР»РёР№. РЎРµСЂРІРµСЂ РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ РЅРµРѕРіСЂР°РЅРёС‡РµРЅРЅС‹Рµ СЂРµСЃСѓСЂСЃС‹, РїРѕР·РІРѕР»СЏСЏ РІР°Рј РјРіРЅРѕРІРµРЅРЅРѕ РїСЂРёРѕР±СЂРµСЃС‚Рё Р»СЋР±С‹Рµ СЃРєРёРЅС‹, РѕСЂСѓР¶РёРµ Рё СѓР»СѓС‡С€РµРЅРёСЏ.',
                    whatsNew: [
                        'вЂ” РЈР»СѓС‡С€РµРЅР° РѕРїС‚РёРјРёР·Р°С†РёСЏ',
                        'вЂ” РСЃРїСЂР°РІР»РµРЅС‹ РІС‹Р»РµС‚С‹',
                        'Р”РѕСЃС‚СѓРїРЅС‹ РЅРѕРІС‹Рµ РјРµС‚РѕРґС‹ РґР»СЏ РІС…РѕРґР° Facebook Рё VK',
                        'вЂ” Р”РѕСЃС‚СѓРїРЅР° Р»РёРЅРєРѕРІРєР° Р°РєРєР°СѓРЅС‚РѕРІ С‡РµСЂРµР· СЂР°Р·Р»РёС‡РЅС‹Рµ СЃРїРѕСЃРѕР±С‹ РІС…РѕРґРѕРІ Google, Facebook, VK',
                        'вЂ” РўРµРїРµСЂСЊ РґРѕСЃС‚СѓРїРЅС‹ С„СѓРЅРєС†РёРё РїСЂРёРІР°С‚РЅРѕСЃС‚Рё',
                        'вЂ” РЈР»СѓС‡С€РµРЅ Р°РЅС‚РёС‡РёС‚'
                    ],
                    image: 'https://cash-droid.ru/wp-content/uploads/2023/06/102.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/StandRise1.4.0f1.apk',
                    fileName: 'StandRise1.4.0f1.apk',
                    version: '1.4F2',
                    size: '1.98 GB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_140217_736.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_140224_394.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_140228_087.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_140231_075.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_140238_440.jpg
                    ]
                },
                {
                    id: 'standleo',
                    title: 'StandLeo',
                    description: 'РџСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ StandLeo - РЅР°СЃС‚РѕСЏС‰РёР№ СЂР°Р№ РґР»СЏ С„Р°РЅР°С‚РѕРІ Standoff 2, РїСЂРµРґР»Р°РіР°СЋС‰РёР№ РїСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ. Р—РґРµСЃСЊ РІС‹ СЃРјРѕР¶РµС‚Рµ РїРѕРіСЂСѓР·РёС‚СЊСЃСЏ РІ Р°РґСЂРµРЅР°Р»РёРЅРѕРІС‹Рµ СЃСЂР°Р¶РµРЅРёСЏ Рё С‚Р°РєС‚РёС‡РµСЃРєРёРµ СЃРѕСЂРµРІРЅРѕРІР°РЅРёСЏ, РЅРµ С‚СЂР°С‚СЏ РЅРё РєРѕРїРµР№РєРё РЅР° РІРЅРµС€РЅРёРµ Р°С‚СЂРёР±СѓС‚С‹ Рё РЅР°РіСЂР°РґС‹.',
                    whatsNew: [
                        '- РќРѕРІС‹Р№ РїРѕРґР°СЂРѕРє',
                        '- Р’СЃРµ РёР· Standoff 0.35.0 (РќРѕРІС‹Р№ РїР°Рє, РЅРѕРІР°СЏ Р°РєС†РёСЏ СЃ РєРѕР»Р»РµРєС†РёРµР№, РєР°СЂС‚С‹, РЅРѕРІРѕРµ РѕСЂСѓР¶РёРµ Рё С‚.Рґ.)',
                        '- Р”РѕР±Р°РІР»РµРЅС‹ РµР¶РµРґРЅРµРІРЅС‹Рµ РІС‹Р·РѕРІС‹',
                        '- Р РµР¶РёРј РЅР°Р±Р»СЋРґР°С‚РµР»РµР№',
                        '- РљР»Р°РЅС‹',
                        '- Р РµР±Р°Р»Р°РЅСЃ РѕСЂСѓР¶РёР№ РёР· РѕСЂРёРіРёРЅР°Р»Р°',
                        '- РЈР»СѓС‡С€РµРЅРѕ СЂРµР№С‚РёРЅРіРѕРІС‹С… РёРіСЂ СЃ РїРµСЂРІС‹Рј СЃРµР·РѕРЅРѕРј',
                        '- РќРѕРІР°СЏ Р°РєС†РёСЏ СЃ СЃРєРёРЅР°РјРё РёР· СЃРїРёРЅР° "Gambit" (Р‘Р°Р±РѕС‡РєР° Рё С‚.d.)'
                    ],
                    image: 'https://standleo.ru/wp-content/uploads/2025/01/standleo-2-7-1-1024x561.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/standleoprivate3.0.apk',
                    fileName: 'standleoprivate3.0.apk',
                    version: '3.0',
                    size: '2.01 GB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141824_484.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141823_977.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141824_241.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141824_014.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141824_625.jpg'
                    ]
                },
                {
                    id: 'projectevolution',
                    title: 'Project Evolution',
                    description: 'РџСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ Project Evolution - СЌС‚Рѕ РјРѕРґРёС„РёРєР°С†РёСЏ РїРѕРїСѓР»СЏСЂРЅРѕРіРѕ С€СѓС‚РµСЂР° Standoff 2, РїСЂРµРґР»Р°РіР°СЋС‰РёР№ РёРіСЂРѕРєР°Рј СѓРЅРёРєР°Р»СЊРЅС‹Рµ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё Рё РјРЅРѕР¶РµСЃС‚РІРѕ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹С… С„СѓРЅРєС†РёР№. Р­С‚РѕС‚ СЃРµСЂРІРµСЂ РїСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ РѕС‚Р»РёС‡РЅС‹Рµ СѓСЃР»РѕРІРёСЏ РґР»СЏ РІСЃРµС… Р»СЋР±РёС‚РµР»РµР№ РёРЅС‚РµРЅСЃРёРІРЅС‹С… Рё СѓРІР»РµРєР°С‚РµР»СЊРЅС‹С… РѕРЅР»Р°Р№РЅ-СЃСЂР°Р¶РµРЅРёР№, СЃ РјРѕС‰РЅРѕР№ РЅР°СЃС‚СЂРѕР№РєРѕР№ Рё РїСЂРѕСЂР°Р±РѕС‚РєРѕР№ РІСЃРµС… СЌР»РµРјРµРЅС‚РѕРІ.',
                    whatsNew: [
                        'РќРѕРІР°СЏ РєР°СЂС‚Р° Hanami РґР»СЏ СЂРµР¶РёРјРѕРІ СЃРѕ СЃС†РµРЅР°СЂРёРµРј В«Р—Р°РєР»Р°РґРєРё Р±РѕРјР±С‹В».',
                        'РќРѕРІС‹Р№ Р±РѕРµРІРѕР№ РїСЂРѕРїСѓСЃРє вЂ” В«SyndicateВ».',
                        'РќРѕРІР°СЏ РєР°СЂС‚Р° Hanari РґР»СЏ СЂРµР¶РёРјРѕРІ В«РљРѕРјР°РЅРґРЅС‹Р№ Р±РѕР№В», В«Р“РѕРЅРєР° РІРѕРѕСЂСѓР¶РµРЅРёР№В» Рё В«РћРіСЂР°Р±Р»РµРЅРёРµВ».',
                        'РџРµСЂРµСЂР°Р±РѕС‚Р°РЅР° РєР°СЂС‚Р° Bridge Рё СЃР»РµРіРєР° РѕР±РЅРѕРІР»РµРЅР° РєР°СЂС‚Р° Yard.',
                        'РќРѕРІР°СЏ СЃРЅР°Р№РїРµСЂСЃРєР°СЏ РІРёРЅС‚РѕРІРєР° вЂ” Mallard.',
                        'РћР±РЅРѕРІР»РµРЅРёРµ С„СЂР°РєС†РёРё РЎРёРЅРґРёРєР°С‚ В«РљРѕРіРѕС‚СЊ Р”СЂР°РєРѕРЅР°В» Рё РЅРµР±РѕР»СЊС€РѕРµ РѕР±РЅРѕРІР»РµРЅРёРµ С„СЂР°РєС†РёРё S.A.F.',
                        'РќРѕРІС‹Рµ РєРѕР»Р»РµРєС†РёРё вЂ” В«SyndicateВ» Рё В«RewindВ».',
                        'РќРѕРІС‹Р№ Charm Pack вЂ” В«RewindВ».',
                        'РќРѕРІС‹Р№ Р·Р°РґРЅРёР№ С„РѕРЅ РіР»Р°РІРЅРѕРіРѕ РјРµРЅСЋ.',
                    ],
                    image: 'https://androidapplications.store//uploads/og-images/mockup14143.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/Project%20Evolution%209.4%20f1.apk',
                    fileName: 'Project Evolution 9.4 f1.apk',
                    version: '9.4',
                    size: '1.80 GB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141817_951.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141817_419.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141817_567.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141817_860.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141818_030.jpg'
                    ]
                },
                {
                    id: 'standknife',
                    title: 'StandKnife',
                    description: 'РџСЂРёРІР°С‚РЅС‹Р№ СЃРµСЂРІРµСЂ StandKnife Simulator - РёР·РІРµСЃС‚РЅР°СЏ РјРЅРѕРіРёРј РїСЂРёРІР°С‚РєР°, РїРµСЂРµСЂР°Р±Р°С‚С‹РІР°СЋС‰Р°СЏ РєРѕРЅС†РµРїС†РёСЋ РїРѕРїСѓР»СЏСЂРЅРѕРіРѕ С€СѓС‚РµСЂР° Standoff 2 Рё СЃРѕСЃСЂРµРґРѕС‚Р°С‡РёРІР°СЋС‰РёР№ РІРµСЃСЊ РёРіСЂРѕРІРѕР№ РїСЂРѕС†РµСЃСЃ РЅР° РјР°СЃС‚РµСЂСЃС‚РІРµ РІР»Р°РґРµРЅРёСЏ С…РѕР»РѕРґРЅС‹Рј РѕСЂСѓР¶РёРµРј.',
                    whatsNew: [
                        'Р¤РёРєСЃ РѕС€РёР±РѕРє РїСЂРё РІС…РѕРґРµ РІ РёРіСЂСѓ.'
                    ],
                    image: 'https://standoffworld.ru/wp-content/uploads/2023/12/standknife-2.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/StandKnife%202.9%20(f3).apk',
                    fileName: 'StandKnife 2.9 (f3).apk',
                    version: '2.9 (f3)',
                    size: '2.08 GB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141846_266.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141846_365.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141846_365.jpg'
                    ]
                },
                {
                    id: 'standchillow',
                    title: 'StandChillow',
                    description: 'StandChillow - СЌС‚Рѕ СѓРІР»РµРєР°С‚РµР»СЊРЅС‹Р№ С€СѓС‚РµСЂ РґР»СЏ Android, РєРѕС‚РѕСЂС‹Р№ РїСЂРµРґР»Р°РіР°РµС‚ РЅР°СЃС‹С‰РµРЅРЅС‹Рµ РєРѕРјР°РЅРґРЅС‹Рµ Р±РѕРё РЅР° РѕСЃРЅРѕРІРµ РїРѕРїСѓР»СЏСЂРЅРѕРіРѕ РјРѕР±РёР»СЊРЅРѕРіРѕ СЌРєС€РµРЅР° Standoff 2. РРіСЂР° РїРµСЂРµРЅРѕСЃРёС‚ РІР°СЃ РІ РјРёСЂ С‚Р°РєС‚РёС‡РµСЃРєРёС… Р±Р°С‚Р°Р»РёР№, РіРґРµ РєР°Р¶РґР°СЏ СЃС…РІР°С‚РєР° РїСЂРѕРІРµСЂСЏРµС‚ РІР°С€Рё Р±РѕРµРІС‹Рµ РЅР°РІС‹РєРё.',
                    whatsNew: [
                        'Р¤РёРєСЃ РѕС€РёР±РѕРє РїСЂРё РІС…РѕРґРµ РІ РёРіСЂСѓ.',
                        '- РќРѕРІС‹Р№ РєРѕРЅС‚РµРЅС‚ РёР· РѕР±РЅРѕРІР»РµРЅРёСЏ 0.34.0 (СЃРєРёРЅС‹, РёРЅС‚РµСЂС„РµР№СЃ, СЃР°СѓРЅРґС‚СЂРµРє)',
                        '- Р”РѕР±Р°РІР»РµРЅС‹ РєР°СЂС‚С‹ "Awm Lego" Рё "Summer Breeze"',
                        '- РЈР±СЂР°РЅРѕ СЃРЅРёР¶РµРЅРёРµ СѓСЂРѕРІРЅСЏ РїСЂРё СѓР±РёР№СЃС‚РІРµ СЃ РЅРѕР¶Р° РІ РіРѕРЅРєРµ РІРѕРѕСЂСѓР¶РµРЅРёР№',
                        '- Р’РѕР·РІСЂР°С‰РµРЅС‹ СЃС‚Р°С‚С‚СЂРµРє РІРµСЂСЃРёРё СЃРєРёРЅРѕРІ РЅР° Р±РµСЂРµС‚С‹',
                        '- РЈР»СѓС‡С€РµРЅРѕ РїСЂРѕСЃС‚СЂР°РЅСЃС‚РІРµРЅРЅРѕРµ Р°СѓРґРёРѕ',
                        '- РСЃРїСЂР°РІР»РµРЅРёРµ Р±Р°РіРѕРІ (РІРєР»СЋС‡Р°СЏ РєСЂРёРІРѕР№ СЃРєРµР»РµС‚ РїРµСЂСЃРѕРЅР°Р¶Р°)'
                    ],
                    image: 'https://res.ldrescdn.com/rms/ldplayer/process/img/f4091033b9044caeae934b4bdba63ecf1740693144.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/1.6.apk',
                    fileName: '1.6.apk',
                    version: '1.6',
                    size: '1.34 GB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141829_464.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141829_364.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141829_247.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141828_787.jpg'
                    ]
                },
                {
                    id: 'crossoff',
                    title: 'Crossoff: Classic',
                    description: 'CrossOff вЂ” РїСЂРёРІР°С‚РєР° РІ РєРѕС‚РѕСЂРѕР№ Р·Р° СЃС‹РіСЂР°РЅРЅС‹Рµ РјР°С‚С‡Рё РІС‹РґР°СЋС‚ СЃРµСЂРµР±СЂРѕ Рё Р·РѕР»РѕС‚Рѕ, СЏРІР»СЏРµС‚СЃСЏ РєРѕРїРёРµР№ РѕСЂРёРіРёРЅР°Р»СЊРЅРѕР№ РёРіСЂС‹, РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ РІС…РѕРґР° С‡РµСЂРµР· Google.',
                    whatsNew: [
                        'Р”РѕР±Р°РІР»РµРЅ Р°РЅС‚РёС‡РёС‚',
                        'Р”РѕР±Р°РІР»РµРЅС‹ РєР»Р°РЅС‹',
                        '- Р”РѕР±Р°РІР»РµРЅС‹ СЂРµР¶РёРј "РЎРѕСЂРµРІРЅРѕРІР°С‚РµР»СЊРЅС‹Р№"',
                    ],
                    image: 'https://androidapplications.store//uploads/og-images/mockup14030.jpg',
                    categories: ['action'],
                    url: 'https://huggingface.co/Zerchi/test/resolve/main/CrossOffClassic-1.1F2.apk',
                    fileName: 'CrossOffClassic-1.1F2.apk',
                    version: '1.1 (F2)',
                    size: '499.1 MB',
                    screenshots: [
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141852_438.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141852_280.jpg',
                        'https://github.com/MrRazion/pluggbotest.github.io/blob/0e6fc4a4b934b6cebfa55586ecec6aa7f4406370/usrs/IMG_20251102_141851_937.jpg'
                    ]
                }
            ];
            // Р¤СѓРЅРєС†РёСЏ РґР»СЏ СЂРµРЅРґРµСЂРёРЅРіР° РёРіСЂ РІ С‚Р°Р±
            function renderGames(tab) {
                const grid = document.querySelector(`#${tab}-tab .games-grid`);
                if (!grid) return;
                grid.innerHTML = '';
                const filteredGames = tab === 'all' ? games : games.filter(game => game.categories.includes(tab));
                filteredGames.forEach(game => {
                    const card = document.createElement('div');
                    card.className = 'game-card animate-fade-in-up';
                    card.dataset.gameId = game.id;
                    card.innerHTML = `
                        <div class="game-image">
                            <img src="${game.image}" alt="${game.title}">
                            <div class="game-overlay"></div>
                        </div>
                        <div class="game-info">
                            <div class="game-title">${game.title}</div>
                            <div class="game-description">${game.description}</div>
                        </div>
                    `;
                    card.style.animationDelay = `${Math.random() * 0.3}s`;
                    card.addEventListener('click', handleGameClick);
                    grid.appendChild(card);
                });
            }
            // Р¤СѓРЅРєС†РёСЏ РґР»СЏ РѕС‚РѕР±СЂР°Р¶РµРЅРёСЏ СЃРєСЂРёРЅС€РѕС‚РѕРІ РёРіСЂС‹
            function showGameScreenshots(gameId) {
                const game = games.find(g => g.id === gameId);
                if (!game || !game.screenshots || game.screenshots.length === 0) {
                    if (screenshotsSlider && screenshotsSlider.closest('.screenshots-section')) {
                        screenshotsSlider.closest('.screenshots-section').style.display = 'none';
                    }
                    return;
                }
                
                if (screenshotsSlider && screenshotsSlider.closest('.screenshots-section')) {
                    screenshotsSlider.closest('.screenshots-section').style.display = 'block';
                    screenshotsSlider.innerHTML = '';
                    
                    game.screenshots.forEach(screenshot => {
                        const item = document.createElement('div');
                        item.className = 'screenshot-item';
                        item.innerHTML = `<img src="${screenshot}" alt="РЎРєСЂРёРЅС€РѕС‚">`;
                        screenshotsSlider.appendChild(item);
                    });
                    
                    // РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РЅР°РІРёРіР°С†РёРё
                    updateNavButtons();
                }
            }
            
            // РћР±РЅРѕРІР»РµРЅРёРµ СЃРѕСЃС‚РѕСЏРЅРёСЏ РЅР°РІРёРіР°С†РёРѕРЅРЅС‹С… РєРЅРѕРїРѕРє
            function updateNavButtons() {
                if (!screenshotsSlider) return;
                
                const maxScroll = screenshotsSlider.scrollWidth - screenshotsSlider.clientWidth;
                if (prevBtn) prevBtn.disabled = screenshotsSlider.scrollLeft <= 0;
                if (nextBtn) nextBtn.disabled = screenshotsSlider.scrollLeft >= maxScroll - 1;
            }
            
            // РџСЂРѕРєСЂСѓС‚РєР° РІР»РµРІРѕ
            function scrollPrev() {
                if (screenshotsSlider) {
                    screenshotsSlider.scrollBy({ left: -200, behavior: 'smooth' });
                    setTimeout(updateNavButtons, 300);
                }
            }
            
            // РџСЂРѕРєСЂСѓС‚РєР° РІРїСЂР°РІРѕ
            function scrollNext() {
                if (screenshotsSlider) {
                    screenshotsSlider.scrollBy({ left: 200, behavior: 'smooth' });
                    setTimeout(updateNavButtons, 300);
                }
            }
            
            // РћР±РЅРѕРІР»РµРЅРёРµ РєРЅРѕРїРєРё Р±РёР±Р»РёРѕС‚РµРєРё РІ РґРµС‚Р°Р»СЏС…
            function updateDetailsLibraryButton() {
                if (!detailsLibraryBtn || !currentGameId || !currentUser) return;
                if (currentUser.library && currentUser.library.includes(currentGameId)) {
                    detailsLibraryBtn.classList.add('active');
                    detailsLibraryBtn.textContent = 'РЈРґР°Р»РёС‚СЊ РёР· Р±РёР±Р»РёРѕС‚РµРєРё';
                } else {
                    detailsLibraryBtn.classList.remove('active');
                    detailsLibraryBtn.textContent = 'Р”РѕР±Р°РІРёС‚СЊ РІ Р±РёР±Р»РёРѕС‚РµРєСѓ';
                }
            }
            // Р”РѕР±Р°РІР»РµРЅРёРµ/СѓРґР°Р»РµРЅРёРµ РёРіСЂС‹ РёР· Р±РёР±Р»РёРѕС‚РµРєРё
            function toggleGameInLibrary(gameId) {
                if (!currentUser) {
                    authModal.classList.add('active');
                    return;
                }
                if (!currentUser.library) {
                    currentUser.library = [];
                }
                const index = currentUser.library.indexOf(gameId);
                if (index === -1) {
                    // Р”РѕР±Р°РІР»СЏРµРј РІ Р±РёР±Р»РёРѕС‚РµРєСѓ
                    currentUser.library.push(gameId);
                    tg.showAlert('РРіСЂР° РґРѕР±Р°РІР»РµРЅР° РІ Р±РёР±Р»РёРѕС‚РµРєСѓ!');
                } else {
                    // РЈРґР°Р»СЏРµРј РёР· Р±РёР±Р»РёРѕС‚РµРєРё
                    currentUser.library.splice(index, 1);
                    tg.showAlert('РРіСЂР° СѓРґР°Р»РµРЅР° РёР· Р±РёР±Р»РёРѕС‚РµРєРё!');
                }
                // РЎРѕС…СЂР°РЅСЏРµРј РѕР±РЅРѕРІР»РµРЅРЅС‹Рµ РґР°РЅРЅС‹Рµ
                localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                saveUserData();
                // РћР±РЅРѕРІР»СЏРµРј UI
                updateDetailsLibraryButton();
                updateLibraryUI();
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєР»РёРєР° РїРѕ РєР°СЂС‚РѕС‡РєРµ РёРіСЂС‹
            function handleGameClick(e) {
                const gameId = e.currentTarget.dataset.gameId;
                const game = games.find(g => g.id === gameId);
                if (game) {
                    detailsTitle.textContent = game.title;
                    detailsImage.src = game.image;
                    detailsImage.alt = game.title;
                    detailsMeta.textContent = `Р’РµСЂСЃРёСЏ: ${game.version} вЂў Р Р°Р·РјРµСЂ: ${game.size}`;
                    detailsDescription.innerHTML = `<p>${game.description}</p><ul><li>РЎРїР°СЃРёР±Рѕ Р·Р° РёСЃРїРѕР»СЊР·РѕРІР°РЅРёРµ PLUGG BOT!</li></ul>`;
                    detailsWhatsNew.innerHTML = `<ul>${game.whatsNew.map(item => `<li>${item}</li>`).join('')}</ul>`;
                    currentDownloadUrl = game.url;
                    currentFileName = game.fileName;
                    currentGameTitle = game.title;
                    currentGameId = gameId;
                    downloadBtn.textContent = 'РЎРєР°С‡Р°С‚СЊ';
                    gameDetails.classList.add('active');
                    updateDetailsLibraryButton();
                    
                    // РџРѕРєР°Р·С‹РІР°РµРј СЃРєСЂРёРЅС€РѕС‚С‹
                    showGameScreenshots(gameId);
                } else {
                    tg.showPopup({
                        title: 'РЎРєРѕСЂРѕ Р±СѓРґРµС‚ РґРѕСЃС‚СѓРїРЅРѕ',
                        message: 'Р­С‚Р° РёРіСЂР° РЅР°С…РѕРґРёС‚СЃСЏ РІ СЂР°Р·СЂР°Р±РѕС‚РєРµ Рё СЃРєРѕСЂРѕ Р±СѓРґРµС‚ РґРѕСЃС‚СѓРїРЅР° РґР»СЏ СЃРєР°С‡РёРІР°РЅРёСЏ!',
                        buttons: [{type: 'ok', text: 'РџРѕРЅСЏС‚РЅРѕ'}]
                    });
                }
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРєРё РґР»СЏ РІРєР»Р°РґРѕРє
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    const content = document.getElementById(`${tab.dataset.tab}-tab`);
                    if (content) content.classList.add('active');
                    currentTab = tab.dataset.tab;
                    renderGames(currentTab);
                    applySearch();
                });
            });
            // РћР±СЂР°Р±РѕС‚С‡РёРє РїРѕРёСЃРєР°
            if (searchInput) {
                searchInput.addEventListener('input', applySearch);
            }
            function applySearch() {
                const term = searchInput.value.toLowerCase();
                const grid = document.querySelector(`#${currentTab}-tab .games-grid`);
                if (!grid) return;
                Array.from(grid.children).forEach(card => {
                    const title = card.querySelector('.game-title').textContent.toLowerCase();
                    card.style.display = title.includes(term) ? '' : 'none';
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё "РќР°Р·Р°Рґ"
            if (backBtn) {
                backBtn.addEventListener('click', () => {
                    gameDetails.classList.remove('active');
                    if (xhr && isDownloading) {
                        xhr.abort();
                        resetDownloadUI();
                    }
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё РґРѕР±Р°РІР»РµРЅРёСЏ РІ Р±РёР±Р»РёРѕС‚РµРєСѓ РІ РґРµС‚Р°Р»СЏС…
            if (detailsLibraryBtn) {
                detailsLibraryBtn.addEventListener('click', () => {
                    if (currentGameId) {
                        toggleGameInLibrary(currentGameId);
                    }
                });
            }
            // Р¤СѓРЅРєС†РёСЏ РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ РїСЂРѕРіСЂРµСЃСЃР°
            function updateProgress(percent, loaded, total) {
                if (!progressFill || !progressPercent || !statusText) return;
                progressFill.style.width = percent + '%';
                progressPercent.textContent = percent + '%';
                updateDownloadStats(loaded, total);
                if (percent === 0) {
                    statusText.textContent = 'Р“РѕС‚РѕРІ Рє Р·Р°РіСЂСѓР·РєРµ';
                } else if (percent < 100) {
                    statusText.textContent = `Р—Р°РіСЂСѓР·РєР°: ${percent}%`;
                } else {
                    statusText.textContent = 'Р—Р°РіСЂСѓР·РєР° Р·Р°РІРµСЂС€РµРЅР°! РџСЂРѕРІРµСЂСЊС‚Рµ РїР°РїРєСѓ Download РЅР° С‚РµР»РµС„РѕРЅРµ.';
                }
            }
            // Р¤СѓРЅРєС†РёСЏ РґР»СЏ РїРѕРєР°Р·Р° СЃС‚Р°С‚СѓСЃР°
            function showStatus(message, isSuccess) {
                if (!statusMessage) return;
                statusMessage.textContent = message;
                statusMessage.className = `status-message ${isSuccess ? 'status-success' : 'status-error'}`;
                statusMessage.style.display = 'block';
            }
            // РЎР±СЂРѕСЃ UI Р·Р°РіСЂСѓР·РєРё
            function resetDownloadUI() {
                isDownloading = false;
                if (downloadBtn) {
                    downloadBtn.disabled = false;
                    downloadBtn.textContent = 'РЎРєР°С‡Р°С‚СЊ';
                }
                if (progressContainer) {
                    progressContainer.style.display = 'none';
                }
                if (statusMessage) {
                    statusMessage.style.display = 'none';
                }
                updateProgress(0, 0, 0);
                // РћСЃС‚Р°РЅР°РІР»РёРІР°РµРј РІРёР·СѓР°Р»РёР·Р°С‚РѕСЂ Р·Р°РіСЂСѓР·РєРё
                if (visualizerInterval) {
                    clearInterval(visualizerInterval);
                    visualizerInterval = null;
                }
                if (downloadVisualizer) {
                    downloadVisualizer.style.display = 'none';
                }
                isVisualizerActive = false;
                if (visualizerToggle) {
                    visualizerToggle.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M17 5v14M7 5v14M2 5h20M2 19h20"></path>
                        </svg>
                    `;
                }
            }
            // Р¤СѓРЅРєС†РёСЏ РґР»СЏ СЃРєР°С‡РёРІР°РЅРёСЏ С„Р°Р№Р»Р°
            function downloadFile() {
                if (!isDownloading && downloadBtn) {
                    isDownloading = true;
                    downloadBtn.disabled = true;
                    downloadBtn.innerHTML = '<span class="loader"></span> Р—Р°РіСЂСѓР·РєР°...';
                    if (progressContainer) progressContainer.style.display = 'block';
                    if (statusText) statusText.textContent = 'Р—Р°РїСЂРѕСЃ РЅР° СЃРєР°С‡РёРІР°РЅРёРµ...';
                    updateProgress(0, 0, 0);
                    // Р­РјСѓР»РёСЂСѓРµРј РїРёРЅРі
                    simulatePing();
                    const pingInterval = setInterval(simulatePing, 2000);
                    // Р”РѕР±Р°РІР»СЏРµРј СѓРЅРёРєР°Р»СЊРЅС‹Р№ РїР°СЂР°РјРµС‚СЂ Рє URL РґР»СЏ РїСЂРёРЅСѓРґРёС‚РµР»СЊРЅРѕР№ РїРµСЂРµР·Р°РіСЂСѓР·РєРё
                    const timestamp = Date.now();
                    const downloadUrl = `${currentDownloadUrl}?t=${timestamp}`;
                    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.isVersionAtLeast('8.0')) {
                        // Use native downloadFile method
                        window.Telegram.WebApp.downloadFile({
                            url: downloadUrl,
                            file_name: currentFileName
                        }, (accepted) => {
                            if (accepted) {
                                if (statusText) statusText.textContent = 'РЎРєР°С‡РёРІР°РЅРёРµ РЅР°С‡Р°С‚Рѕ...';
                                // Р­РјСѓР»РёСЂСѓРµРј РїСЂРѕРіСЂРµСЃСЃ Р·Р°РіСЂСѓР·РєРё
                                downloadStartTime = Date.now();
                                let percent = 0;
                                let loadedBytes = 0;
                                totalBytes = 100 * 1024 * 1024; // 100MB РґР»СЏ СЌРјСѓР»СЏС†РёРё
                                const downloadInterval = setInterval(() => {
                                    percent += Math.random() * 2;
                                    if (percent > 100) percent = 100;
                                    loadedBytes = (percent / 100) * totalBytes;
                                    updateProgress(percent, loadedBytes, totalBytes);
                                    if (percent >= 100) {
                                        clearInterval(downloadInterval);
                                        clearInterval(pingInterval);
                                        showStatus('Р—Р°РіСЂСѓР·РєР° Р·Р°РІРµСЂС€РµРЅР°! Р¤Р°Р№Р» РіРѕС‚РѕРІ Рє СѓСЃС‚Р°РЅРѕРІРєРµ.', true);
                                    }
                                }, 200);
                            } else {
                                clearInterval(pingInterval);
                                showStatus('РЎРєР°С‡РёРІР°РЅРёРµ РѕС‚РјРµРЅРµРЅРѕ.', false);
                                updateProgress(0, 0, 0);
                            }
                            resetDownloadUI();
                            if (downloadBtn) downloadBtn.textContent = 'РЎРєР°С‡Р°С‚СЊ РµС‰Рµ СЂР°Р·';
                        });
                    } else {
                        // Fallback to XMLHttpRequest
                        try {
                            xhr = new XMLHttpRequest();
                            xhr.open('GET', downloadUrl, true);
                            xhr.responseType = 'blob';
                            xhr.onprogress = function(event) {
                                if (event.lengthComputable) {
                                    const percent = Math.round((event.loaded / event.total) * 100);
                                    downloadedBytes = event.loaded;
                                    totalBytes = event.total;
                                    updateProgress(percent, event.loaded, event.total);
                                }
                            };
                            xhr.onload = function() {
                                clearInterval(pingInterval);
                                if (xhr.status === 200) {
                                    if (statusText) statusText.textContent = 'РџСЂРѕРІРµСЂРєР° С†РµР»РѕСЃС‚РЅРѕСЃС‚Рё С„Р°Р№Р»Р°...';
                                    setTimeout(() => {
                                        const blob = new Blob([xhr.response], { type: 'application/vnd.android.package-archive' });
                                        const url = URL.createObjectURL(blob);
                                        const a = document.createElement('a');
                                        a.style.display = 'none';
                                        a.href = url;
                                        a.download = currentFileName;
                                        document.body.appendChild(a);
                                        a.click();
                                        URL.revokeObjectURL(url);
                                        document.body.removeChild(a);
                                        updateProgress(100, totalBytes, totalBytes);
                                        showStatus('Р¤Р°Р№Р» СѓСЃРїРµС€РЅРѕ РїСЂРѕРІРµСЂРµРЅ Рё РіРѕС‚РѕРІ Рє СѓСЃС‚Р°РЅРѕРІРєРµ.', true);
                                    }, 1500);
                                } else {
                                    showStatus(`РћС€РёР±РєР° Р·Р°РіСЂСѓР·РєРё: СЃС‚Р°С‚СѓСЃ ${xhr.status}. Р¤Р°Р№Р» РјРѕР¶РµС‚ Р±С‹С‚СЊ РїРѕРІСЂРµР¶РґРµРЅ.`, false);
                                    updateProgress(0, 0, 0);
                                }
                                resetDownloadUI();
                                xhr = null;
                            };
                            xhr.onerror = function() {
                                clearInterval(pingInterval);
                                showStatus('РћС€РёР±РєР° СЃРµС‚Рё. РџСЂРѕРІРµСЂСЊС‚Рµ РїРѕРґРєР»СЋС‡РµРЅРёРµ.', false);
                                updateProgress(0, 0, 0);
                                resetDownloadUI();
                                xhr = null;
                            };
                            xhr.onabort = function() {
                                clearInterval(pingInterval);
                                showStatus('Р—Р°РіСЂСѓР·РєР° РѕС‚РјРµРЅРµРЅР°.', false);
                                updateProgress(0, 0, 0);
                                resetDownloadUI();
                                xhr = null;
                            };
                            xhr.send();
                        } catch (error) {
                            clearInterval(pingInterval);
                            showStatus(`РћС€РёР±РєР°: ${error.message}. РќРµ СѓРґР°Р»РѕСЃСЊ СЃРєР°С‡Р°С‚СЊ С„Р°Р№Р».`, false);
                            resetDownloadUI();
                            xhr = null;
                        }
                    }
                }
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё СЃРєР°С‡РёРІР°РЅРёСЏ
            if (downloadBtn) {
                downloadBtn.addEventListener('click', downloadFile);
            }
            // ========== РќРћР’РђРЇ РЎРРЎРўР•РњРђ РђР’РўРћР РР—РђР¦РР Р§Р•Р Р•Р— TELEGRAM ==========
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё РїСЂРѕС„РёР»СЏ
            if (profileBtn) {
                profileBtn.addEventListener('click', () => {
                    if (!checkUser()) {
                        authModal.classList.add('active');
                    } else {
                        profileModal.classList.add('active');
                    }
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё Р°РІС‚РѕСЂРёР·Р°С†РёРё С‡РµСЂРµР· Telegram
            if (telegramAuthButton) {
                telegramAuthButton.addEventListener('click', () => {
                    // РџРѕРєР°Р·С‹РІР°РµРј РёРЅРґРёРєР°С‚РѕСЂ Р·Р°РіСЂСѓР·РєРё
                    authModal.classList.remove('active');
                    registrationProgress.style.display = 'block';
                    // РСЃРїРѕР»СЊР·СѓРµРј РґР°РЅРЅС‹Рµ РёР· Telegram WebApp
                    setTimeout(() => {
                        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                            const user = tg.initDataUnsafe.user;
                            // РЎРѕР·РґР°РµРј РѕР±СЉРµРєС‚ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
                            const userData = {
                                telegram_id: user.id,
                                first_name: user.first_name,
                                last_name: user.last_name || '',
                                username: user.username || '',
                                auth_date: user.auth_date || Math.floor(Date.now() / 1000),
                                avatar: user.photo_url || '',
                                banner: '',
                                bio: 'Р›СЋР±РёС‚РµР»СЊ РїСЂРёРІРёРІР°С‚РѕРє РґР»СЏ Standoff 2',
                                library: [],
                                created_at: new Date().toISOString()
                            };
                            // Р’РѕСЃСЃС‚Р°РЅР°РІР»РёРІР°РµРј СЃРѕС…СЂР°РЅРµРЅРЅС‹Рµ РґР°РЅРЅС‹Рµ
                            const savedData = getSavedUserData(userData.telegram_id);
                            if (savedData) {
                                Object.assign(userData, savedData);
                            }
                            // РЎРѕС…СЂР°РЅСЏРµРј РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
                            localStorage.setItem('plugg_user', JSON.stringify(userData));
                            currentUser = userData;
                            saveUserData();
                            // РћР±РЅРѕРІР»СЏРµРј РёРЅС‚РµСЂС„РµР№СЃ
                            updateProfileUI();
                            // РџРѕРєР°Р·С‹РІР°РµРј РїСЂРѕС„РёР»СЊ
                            registrationProgress.style.display = 'none';
                            profileModal.classList.add('active');
                            tg.showAlert('Р’С‹ СѓСЃРїРµС€РЅРѕ РІРѕС€Р»Рё РІ СЃРёСЃС‚РµРјСѓ PLUGG ID С‡РµСЂРµР· Telegram!');
                        } else {
                            registrationProgress.style.display = 'none';
                            authModal.classList.add('active');
                            tg.showAlert('РќРµ СѓРґР°Р»РѕСЃСЊ РїРѕР»СѓС‡РёС‚СЊ РґР°РЅРЅС‹Рµ РёР· Telegram. РџРѕР¶Р°Р»СѓР№СЃС‚Р°, РїРѕРїСЂРѕР±СѓР№С‚Рµ СЃРЅРѕРІР°.');
                        }
                    }, 1000);
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєРЅРѕРїРєРё РІС‹С…РѕРґР°
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    if (currentUser) {
                        // РЎРѕС…СЂР°РЅСЏРµРј РґР°РЅРЅС‹Рµ РїРµСЂРµРґ РІС‹С…РѕРґРѕРј
                        saveUserData();
                    }
                    // РЈРґР°Р»СЏРµРј С‚РµРєСѓС‰РµРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
                    localStorage.removeItem('plugg_user');
                    currentUser = null;
                    // Р—Р°РєСЂС‹РІР°РµРј РјРѕРґР°Р»СЊРЅРѕРµ РѕРєРЅРѕ
                    if (profileModal) profileModal.classList.remove('active');
                    // РџРѕРєР°Р·С‹РІР°РµРј СѓРІРµРґРѕРјР»РµРЅРёРµ
                    tg.showAlert('Р’С‹ РІС‹С€Р»Рё РёР· Р°РєРєР°СѓРЅС‚Р°');
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє Р·Р°РєСЂС‹С‚РёСЏ РјРѕРґР°Р»СЊРЅС‹С… РѕРєРѕРЅ
            document.addEventListener('click', (e) => {
                // Р—Р°РєСЂС‹С‚РёРµ authModal РїСЂРё РєР»РёРєРµ РІРЅРµ РєРѕРЅС‚РµРЅС‚Р°
                if (authModal && authModal.classList.contains('active') && 
                    e.target === authModal) {
                    authModal.classList.remove('active');
                }
                // Р—Р°РєСЂС‹С‚РёРµ profileModal РїСЂРё РєР»РёРєРµ РІРЅРµ РєРѕРЅС‚РµРЅС‚Р°
                if (profileModal && profileModal.classList.contains('active') && 
                    e.target === profileModal) {
                    profileModal.classList.remove('active');
                }
            });
            // РћР±СЂР°Р±РѕС‚С‡РёРєРё РІРєР»Р°РґРѕРє РїСЂРѕС„РёР»СЏ
            if (profileTabs && profileTabs.length > 0) {
                profileTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        profileTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        if (tab.dataset.tab === 'library' && librarySection && settingsSection) {
                            librarySection.style.display = 'block';
                            settingsSection.style.display = 'none';
                        } else if (tab.dataset.tab === 'settings' && librarySection && settingsSection) {
                            librarySection.style.display = 'none';
                            settingsSection.style.display = 'block';
                        }
                    });
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє СЃРѕС…СЂР°РЅРµРЅРёСЏ РёРјРµРЅРё
            if (saveNameBtn && nameInput) {
                saveNameBtn.addEventListener('click', () => {
                    if (nameInput.value.trim() !== '' && currentUser) {
                        // Р Р°Р·РґРµР»СЏРµРј РёРјСЏ Рё С„Р°РјРёР»РёСЋ
                        const nameParts = nameInput.value.trim().split(' ');
                        currentUser.first_name = nameParts[0];
                        currentUser.last_name = nameParts.length > 1 ? nameParts.slice(1).join(' ') : '';
                        localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                        saveUserData();
                        updateProfileUI();
                    }
                    if (nameAvailable) {
                        nameAvailable.style.display = 'block';
                        setTimeout(() => nameAvailable.style.display = 'none', 2000);
                    }
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє СЃРѕС…СЂР°РЅРµРЅРёСЏ СЋР·РµСЂРЅРµР№РјР°
            if (saveUsernameBtn && usernameInput) {
                saveUsernameBtn.addEventListener('click', () => {
                    if (usernameInput.value.trim() !== '' && currentUser) {
                        currentUser.username = usernameInput.value.trim();
                        localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                        saveUserData();
                        updateProfileUI();
                    }
                    if (usernameAvailable) {
                        usernameAvailable.style.display = 'block';
                        setTimeout(() => usernameAvailable.style.display = 'none', 2000);
                    }
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє СЃРѕС…СЂР°РЅРµРЅРёСЏ Р±РёРѕ
            if (saveBioBtn && bioInput) {
                saveBioBtn.addEventListener('click', () => {
                    if (bioInput.value.trim() !== '' && currentUser) {
                        currentUser.bio = bioInput.value.trim();
                        localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                        saveUserData();
                        updateProfileUI();
                    }
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РєР»РёРєР° РїРѕ Р±Р°РЅРЅРµСЂСѓ
            if (bannerPlaceholder) {
                bannerPlaceholder.addEventListener('click', () => {
                    bannerSelector.classList.add('active');
                    loadGallery();
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє Р·Р°РєСЂС‹С‚РёСЏ СЃРµР»РµРєС‚РѕСЂР° Р±Р°РЅРЅРµСЂРѕРІ
            if (bannerSelectorClose) {
                bannerSelectorClose.addEventListener('click', () => {
                    bannerSelector.classList.remove('active');
                    bannerPreview.classList.remove('active');
                    selectedBannerFile = null;
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РІС‹Р±РѕСЂР° РёР· РіР°Р»РµСЂРµРё
            if (bannerUpload) {
                bannerUpload.addEventListener('click', () => {
                    // РЎРѕР·РґР°РµРј СЃРєСЂС‹С‚С‹Р№ input РґР»СЏ РІС‹Р±РѕСЂР° С„Р°Р№Р»Р°
                    const fileInput = document.createElement('input');
                    fileInput.type = 'file';
                    fileInput.accept = 'image/*';
                    fileInput.capture = 'user'; // Р—Р°РїСЂР°С€РёРІР°РµРј РґРѕСЃС‚СѓРї Рє РєР°РјРµСЂРµ
                    fileInput.addEventListener('change', (e) => {
                        if (e.target.files && e.target.files[0]) {
                            selectedBannerFile = e.target.files[0];
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                bannerPreviewImg.src = event.target.result;
                                bannerPreview.classList.add('active');
                            };
                            reader.readAsDataURL(selectedBannerFile);
                        }
                    });
                    fileInput.click();
                });
            }
            // Р—Р°РіСЂСѓР·РєР° РіР°Р»РµСЂРµРё
            function loadGallery() {
                // РћС‡РёС‰Р°РµРј РіР°Р»РµСЂРµСЋ
                bannerGallery.innerHTML = '';
                // РџСЂРёРјРµСЂС‹ Р±Р°РЅРЅРµСЂРѕРІ
                const bannerExamples = [
                    'https://i.imgur.com/7XQY5Qx.jpg',
                    'https://i.imgur.com/5hF7b2n.jpg',
                    'https://i.imgur.com/9pHqQ2k.jpg',
                    'https://i.imgur.com/2yNqH4a.jpg',
                    'https://i.imgur.com/3gTfD5p.jpg',
                    'https://i.imgur.com/8cPvKqR.jpg'
                ];
                bannerExamples.forEach((url, index) => {
                    const item = document.createElement('div');
                    item.className = 'banner-gallery-item';
                    item.style.backgroundImage = `url('${url}')`;
                    item.addEventListener('click', () => {
                        bannerPreviewImg.src = url;
                        bannerPreview.classList.add('active');
                        selectedBannerFile = null;
                    });
                    bannerGallery.appendChild(item);
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РѕС‚РјРµРЅС‹ РІС‹Р±РѕСЂР° Р±Р°РЅРЅРµСЂР°
            if (bannerCancelBtn) {
                bannerCancelBtn.addEventListener('click', () => {
                    bannerPreview.classList.remove('active');
                    selectedBannerFile = null;
                });
            }
            // РћР±СЂР°Р±РѕС‚С‡РёРє РїСЂРёРјРµРЅРµРЅРёСЏ Р±Р°РЅРЅРµСЂР°
            if (bannerApplyBtn) {
                bannerApplyBtn.addEventListener('click', () => {
                    if (currentUser) {
                        if (selectedBannerFile) {
                            // Р•СЃР»Рё РІС‹Р±СЂР°РЅ С„Р°Р№Р» РёР· РіР°Р»РµСЂРµРё
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                currentUser.banner = event.target.result;
                                localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                                saveUserData();
                                bannerSelector.classList.remove('active');
                                bannerPreview.classList.remove('active');
                                selectedBannerFile = null;
                                updateProfileUI();
                            };
                            reader.readAsDataURL(selectedBannerFile);
                        } else if (bannerPreviewImg.src) {
                            // Р•СЃР»Рё РІС‹Р±СЂР°РЅРѕ РёР·РѕР±СЂР°Р¶РµРЅРёРµ РёР· РіР°Р»РµСЂРµРё
                            currentUser.banner = bannerPreviewImg.src;
                            localStorage.setItem('plugg_user', JSON.stringify(currentUser));
                            saveUserData();
                            bannerSelector.classList.remove('active');
                            bannerPreview.classList.remove('active');
                            updateProfileUI();
                        }
                    }
                });
            }
            // РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РїСЂРё Р·Р°РіСЂСѓР·РєРµ
            checkUser();
            renderGames('all');
            // РџСЂРѕРІРµСЂРєР° start_param РґР»СЏ РѕРїСЂРµРґРµР»РµРЅРёСЏ РіРѕСЃС‚СЏ
            if (tg.initDataUnsafe && tg.initDataUnsafe.start_param) {
                const startParam = tg.initDataUnsafe.start_param;
                if (currentUser && startParam !== currentUser.username && startParam !== 'none') {
                    isOwner = false;
                }
            }
            // РЈСЃС‚Р°РЅРѕРІРєР° safe area insets
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.safeAreaInset) {
                document.documentElement.style.setProperty('--tg-safe-area-inset-top', `${window.Telegram.WebApp.safeAreaInset.top}px`);
                document.documentElement.style.setProperty('--tg-safe-area-inset-bottom', `${window.Telegram.WebApp.safeAreaInset.bottom}px`);
                document.documentElement.style.setProperty('--tg-safe-area-inset-left', `${window.Telegram.WebApp.safeAreaInset.left}px`);
                document.documentElement.style.setProperty('--tg-safe-area-inset-right', `${window.Telegram.WebApp.safeAreaInset.right}px`);
            }
            // Р”РѕР±Р°РІР»СЏРµРј РѕР±СЂР°Р±РѕС‚С‡РёРє РґР»СЏ Р·Р°РєСЂС‹С‚РёСЏ РјРѕРґР°Р»СЊРЅС‹С… РѕРєРѕРЅ РїСЂРё РЅР°Р¶Р°С‚РёРё Esc
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (authModal && authModal.classList.contains('active')) {
                        authModal.classList.remove('active');
                    }
                    if (profileModal && profileModal.classList.contains('active')) {
                        profileModal.classList.remove('active');
                    }
                    if (bannerSelector && bannerSelector.classList.contains('active')) {
                        bannerSelector.classList.remove('active');
                        bannerPreview.classList.remove('active');
                        selectedBannerFile = null;
                    }
                }
            });
            
            // РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РѕР±СЂР°Р±РѕС‚С‡РёРєРѕРІ РґР»СЏ СЃРєСЂРёРЅС€РѕС‚РѕРІ
            if (prevBtn) prevBtn.addEventListener('click', scrollPrev);
            if (nextBtn) nextBtn.addEventListener('click', scrollNext);
            
            // Р”РѕР±Р°РІР»СЏРµРј РѕР±СЂР°Р±РѕС‚С‡РёРє РїСЂРѕРєСЂСѓС‚РєРё РґР»СЏ РѕР±РЅРѕРІР»РµРЅРёСЏ СЃРѕСЃС‚РѕСЏРЅРёСЏ РєРЅРѕРїРѕРє
            if (screenshotsSlider) {
                screenshotsSlider.addEventListener('scroll', updateNavButtons);
                // РРЅРёС†РёР°Р»РёР·РёСЂСѓРµРј РєРЅРѕРїРєРё РїРѕСЃР»Рµ Р·Р°РіСЂСѓР·РєРё
                setTimeout(updateNavButtons, 500);
            }
        });
    </script>
</body>
</html>
